#!/bin/bash
echo "ğŸš€ Running pre-push checks..."

# 1. Bundle budget check (check-only; must not write git working tree files)
#    Blocking budgets fail the push; trend alerts are warnings only.
echo "ğŸ“¦ Checking bundle budgets (blocking + trend monitor)..."
node scripts/bundle-budget-check.mjs
if [ $? -ne 0 ]; then
  echo "âŒ Blocking bundle budget violation detected! Push aborted."
  exit 1
fi

# 2. Coverage ratchet (only if tests can run quickly)
# Skip for now - tests take too long for pre-push
# echo "ğŸ§ª Checking test coverage ratchet..."
# bash scripts/coverage-ratchet.sh

echo "âœ… Pre-push checks passed!"
