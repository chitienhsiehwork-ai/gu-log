{"id":"07bb25db1980262113dd27092e4d02d8dcf0410f","url":"http://localhost:4321/src/components/LevelUpQuiz.astro?astro&type=script&index=0&lang.ts","source":"document.addEventListener(\"click\", (e) => {\n  const button = e.target.closest(\".quiz-option\");\n  if (!button) return;\n  const quiz = button.closest(\".levelup-quiz\");\n  if (!quiz || quiz.classList.contains(\"answered\")) return;\n  const answer = quiz.dataset.answer;\n  const selected = button.dataset.label;\n  const isCorrect = selected === answer;\n  quiz.classList.add(\"answered\");\n  button.classList.add(isCorrect ? \"correct\" : \"wrong\");\n  if (!isCorrect) {\n    const correctBtn = quiz.querySelector(`.quiz-option[data-label=\"${answer}\"]`);\n    correctBtn?.classList.add(\"correct\");\n  }\n  quiz.querySelectorAll(\".quiz-option\").forEach((btn) => {\n    btn.disabled = true;\n  });\n  const resultCorrect = quiz.querySelector(\".result-correct\");\n  const resultWrong = quiz.querySelector(\".result-wrong\");\n  if (isCorrect) {\n    resultCorrect.hidden = false;\n  } else {\n    resultWrong.hidden = false;\n  }\n});\n","sourceMap":{"version":3,"sources":["LevelUpQuiz.astro"],"sourcesContent":["---\n/**\n * LevelUpQuiz - Interactive MCQ quiz component for Level-Up tutorials\n *\n * Usage in .mdx:\n *   <LevelUpQuiz\n *     question=\"什麼是 DNS？\"\n *     options={[\n *       { label: \"A\", text: \"一種程式語言\" },\n *       { label: \"B\", text: \"網域名稱系統\" },\n *       { label: \"C\", text: \"一種資料庫\" },\n *     ]}\n *     answer=\"B\"\n *     explanation=\"DNS (Domain Name System) 是將網域名稱轉換成 IP 位址的系統。\"\n *   />\n */\n\ninterface Option {\n  label: string;\n  text: string;\n}\n\ninterface Props {\n  question: string;\n  options: Option[];\n  answer: string;\n  explanation: string;\n}\n\nconst { question, options, answer, explanation } = Astro.props;\n\n// Generate a unique ID for this quiz instance\nconst quizId = `quiz-${Math.random().toString(36).slice(2, 9)}`;\n---\n\n<div class=\"levelup-quiz\" data-quiz-id={quizId} data-answer={answer}>\n  <div class=\"quiz-header\">\n    <span class=\"quiz-icon\">❓</span>\n    <span class=\"quiz-label\">小測驗</span>\n  </div>\n  <p class=\"quiz-question\">{question}</p>\n  <div class=\"quiz-options\">\n    {options.map((opt) => (\n      <button\n        class=\"quiz-option\"\n        data-label={opt.label}\n        type=\"button\"\n      >\n        <span class=\"option-label\">{opt.label}</span>\n        <span class=\"option-text\">{opt.text}</span>\n      </button>\n    ))}\n  </div>\n  <div class=\"quiz-result\" aria-live=\"polite\">\n    <div class=\"result-correct\" hidden>\n      <span class=\"result-icon\">✅</span>\n      <strong>正確！</strong>\n      <p class=\"result-explanation\">{explanation}</p>\n    </div>\n    <div class=\"result-wrong\" hidden>\n      <span class=\"result-icon\">❌</span>\n      <strong>不對喔！</strong>\n      <p class=\"result-answer\">正確答案是 <strong>{answer}</strong></p>\n      <p class=\"result-explanation\">{explanation}</p>\n    </div>\n  </div>\n</div>\n\n<script>\n  document.addEventListener('click', (e) => {\n    const button = (e.target as HTMLElement).closest('.quiz-option');\n    if (!button) return;\n\n    const quiz = button.closest('.levelup-quiz') as HTMLElement;\n    if (!quiz || quiz.classList.contains('answered')) return;\n\n    const answer = quiz.dataset.answer;\n    const selected = (button as HTMLElement).dataset.label;\n    const isCorrect = selected === answer;\n\n    // Mark quiz as answered\n    quiz.classList.add('answered');\n\n    // Highlight selected option\n    button.classList.add(isCorrect ? 'correct' : 'wrong');\n\n    // If wrong, also highlight the correct answer\n    if (!isCorrect) {\n      const correctBtn = quiz.querySelector(`.quiz-option[data-label=\"${answer}\"]`);\n      correctBtn?.classList.add('correct');\n    }\n\n    // Disable all options\n    quiz.querySelectorAll('.quiz-option').forEach((btn) => {\n      (btn as HTMLButtonElement).disabled = true;\n    });\n\n    // Show result\n    const resultCorrect = quiz.querySelector('.result-correct') as HTMLElement;\n    const resultWrong = quiz.querySelector('.result-wrong') as HTMLElement;\n\n    if (isCorrect) {\n      resultCorrect.hidden = false;\n    } else {\n      resultWrong.hidden = false;\n    }\n  });\n</script>\n\n<style>\n  .levelup-quiz {\n    border: 2px solid var(--color-border);\n    border-radius: 12px;\n    padding: 1.25rem;\n    margin: 1.5rem 0;\n    background: var(--color-surface);\n  }\n\n  .quiz-header {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    margin-bottom: 0.75rem;\n    font-size: 0.85rem;\n    color: var(--color-text-muted);\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n  }\n\n  .quiz-icon {\n    font-size: 1.1rem;\n  }\n\n  .quiz-question {\n    font-size: 1.05rem;\n    font-weight: 600;\n    margin-bottom: 1rem;\n    color: var(--color-text);\n    line-height: 1.5;\n  }\n\n  .quiz-options {\n    display: flex;\n    flex-direction: column;\n    gap: 0.5rem;\n  }\n\n  .quiz-option {\n    display: flex;\n    align-items: center;\n    gap: 0.75rem;\n    padding: 0.75rem 1rem;\n    border: 2px solid var(--color-border);\n    border-radius: 8px;\n    background: transparent;\n    color: var(--color-text);\n    font-family: inherit;\n    font-size: 0.95rem;\n    cursor: pointer;\n    text-align: left;\n    transition: border-color 0.2s, background 0.2s;\n    -webkit-tap-highlight-color: transparent;\n    min-height: 48px; /* Touch-friendly */\n  }\n\n  .quiz-option:hover:not(:disabled) {\n    border-color: var(--color-accent);\n    background: var(--color-surface-hover);\n  }\n\n  .quiz-option:disabled {\n    cursor: default;\n    opacity: 0.8;\n  }\n\n  .option-label {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 2rem;\n    height: 2rem;\n    border-radius: 50%;\n    background: var(--color-surface-hover);\n    font-weight: 700;\n    font-size: 0.85rem;\n    flex-shrink: 0;\n    color: var(--color-text);\n  }\n\n  .option-text {\n    flex: 1;\n    line-height: 1.4;\n  }\n\n  /* Correct answer */\n  .quiz-option.correct {\n    border-color: #22c55e;\n    background: rgba(34, 197, 94, 0.1);\n  }\n\n  .quiz-option.correct .option-label {\n    background: #22c55e;\n    color: #fff;\n  }\n\n  /* Wrong answer */\n  .quiz-option.wrong {\n    border-color: #ef4444;\n    background: rgba(239, 68, 68, 0.1);\n  }\n\n  .quiz-option.wrong .option-label {\n    background: #ef4444;\n    color: #fff;\n  }\n\n  /* Result area */\n  .quiz-result {\n    margin-top: 0.75rem;\n  }\n\n  .result-correct,\n  .result-wrong {\n    padding: 1rem;\n    border-radius: 8px;\n    margin-top: 0.5rem;\n    animation: fadeIn 0.3s ease;\n  }\n\n  .result-correct {\n    background: rgba(34, 197, 94, 0.08);\n    border-left: 3px solid #22c55e;\n  }\n\n  .result-wrong {\n    background: rgba(239, 68, 68, 0.08);\n    border-left: 3px solid #ef4444;\n  }\n\n  .result-icon {\n    font-size: 1.1rem;\n    margin-right: 0.25rem;\n  }\n\n  .result-explanation {\n    margin-top: 0.5rem;\n    color: var(--color-text-muted);\n    font-size: 0.9rem;\n    line-height: 1.6;\n  }\n\n  .result-answer {\n    margin-top: 0.25rem;\n    font-size: 0.9rem;\n  }\n\n  /* Light theme adjustments */\n  [data-theme='light'] .quiz-option.correct {\n    background: rgba(34, 197, 94, 0.08);\n  }\n\n  [data-theme='light'] .quiz-option.wrong {\n    background: rgba(239, 68, 68, 0.08);\n  }\n\n  @keyframes fadeIn {\n    from { opacity: 0; transform: translateY(-4px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n\n  /* Mobile touch targets */\n  @media (pointer: coarse) {\n    .quiz-option {\n      padding: 1rem;\n      min-height: 52px;\n    }\n  }\n</style>"],"mappings":"AAqEE,SAAS,iBAAiB,SAAS,CAAC,MAAM;AACxC,QAAM,SAAU,EAAE,OAAuB,QAAQ,cAAc;AAC/D,MAAI,CAAC,OAAQ;AAEb,QAAM,OAAO,OAAO,QAAQ,eAAe;AAC3C,MAAI,CAAC,QAAQ,KAAK,UAAU,SAAS,UAAU,EAAG;AAElD,QAAM,SAAS,KAAK,QAAQ;AAC5B,QAAM,WAAY,OAAuB,QAAQ;AACjD,QAAM,YAAY,aAAa;AAG/B,OAAK,UAAU,IAAI,UAAU;AAG7B,SAAO,UAAU,IAAI,YAAY,YAAY,OAAO;AAGpD,MAAI,CAAC,WAAW;AACd,UAAM,aAAa,KAAK,cAAc,4BAA4B,MAAM,IAAI;AAC5E,gBAAY,UAAU,IAAI,SAAS;EACrC;AAGA,OAAK,iBAAiB,cAAc,EAAE,QAAQ,CAAC,QAAQ;AACrD,IAAC,IAA0B,WAAW;EACxC,CAAC;AAGD,QAAM,gBAAgB,KAAK,cAAc,iBAAiB;AAC1D,QAAM,cAAc,KAAK,cAAc,eAAe;AAEtD,MAAI,WAAW;AACb,kBAAc,SAAS;EACzB,OAAO;AACL,gBAAY,SAAS;EACvB;AACF,CAAC;","names":[]}}