{"id":"eac716399247f2008bbb56de81467bf1d3229e18","url":"http://localhost:4321/src/components/ReadingProgress.astro?astro&type=script&index=0&lang.ts","source":"const articleElement = document.querySelector(\"article.post\");\nconst progressBar = document.getElementById(\"reading-progress\");\nif (articleElement && progressBar) {\n  let updateProgress2 = function() {\n    if (!articleElement || !progressBar) return;\n    const articleTop = articleElement.offsetTop;\n    const articleHeight = articleElement.offsetHeight;\n    const windowHeight = window.innerHeight;\n    const scrollTop = window.scrollY;\n    const scrollableHeight = articleHeight - windowHeight;\n    const scrolled = scrollTop - articleTop;\n    const percentage = Math.min(Math.max(scrolled / scrollableHeight * 100, 0), 100);\n    progressBar.style.width = `${percentage}%`;\n    rafId = null;\n  }, onScroll2 = function() {\n    if (rafId === null) {\n      rafId = requestAnimationFrame(updateProgress2);\n    }\n  };\n  var updateProgress = updateProgress2, onScroll = onScroll2;\n  let rafId = null;\n  updateProgress2();\n  window.addEventListener(\"scroll\", onScroll2, { passive: true });\n  document.addEventListener(\"astro:before-swap\", () => {\n    window.removeEventListener(\"scroll\", onScroll2);\n    if (rafId !== null) {\n      cancelAnimationFrame(rafId);\n    }\n  });\n}\n","sourceMap":{"version":3,"sources":["ReadingProgress.astro"],"sourcesContent":["---\n// Reading progress bar component\n// Shows progress as user scrolls through article content\n---\n\n<div id=\"reading-progress\" class=\"reading-progress\"></div>\n\n<script>\n  // Only run on pages with article content\n  const articleElement = document.querySelector('article.post') as HTMLElement | null;\n  const progressBar = document.getElementById('reading-progress');\n\n  if (articleElement && progressBar) {\n    let rafId: number | null = null;\n\n    function updateProgress() {\n      if (!articleElement || !progressBar) return;\n\n      // Calculate scroll progress based on article position\n      const articleTop = articleElement.offsetTop;\n      const articleHeight = articleElement.offsetHeight;\n      const windowHeight = window.innerHeight;\n      const scrollTop = window.scrollY;\n\n      // Calculate visible article height (exclude what's not yet scrolled to)\n      const scrollableHeight = articleHeight - windowHeight;\n      const scrolled = scrollTop - articleTop;\n\n      // Calculate percentage (0-100)\n      const percentage = Math.min(Math.max((scrolled / scrollableHeight) * 100, 0), 100);\n\n      progressBar.style.width = `${percentage}%`;\n      rafId = null;\n    }\n\n    function onScroll() {\n      if (rafId === null) {\n        rafId = requestAnimationFrame(updateProgress);\n      }\n    }\n\n    // Initial update\n    updateProgress();\n\n    // Listen to scroll events\n    window.addEventListener('scroll', onScroll, { passive: true });\n\n    // Cleanup on navigation (for view transitions)\n    document.addEventListener('astro:before-swap', () => {\n      window.removeEventListener('scroll', onScroll);\n      if (rafId !== null) {\n        cancelAnimationFrame(rafId);\n      }\n    });\n  }\n</script>\n\n<style>\n  .reading-progress {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 0;\n    height: 3px;\n    background-color: var(--color-accent);\n    z-index: 1000;\n    transition: width 0.1s ease-out;\n  }\n</style>"],"mappings":"AASE,MAAM,iBAAiB,SAAS,cAAc,cAAc;AAC5D,MAAM,cAAc,SAAS,eAAe,kBAAkB;AAE9D,IAAI,kBAAkB,aAAa;AAGjC,MAASA,kBAAT,WAA0B;AACxB,QAAI,CAAC,kBAAkB,CAAC,YAAa;AAGrC,UAAM,aAAa,eAAe;AAClC,UAAM,gBAAgB,eAAe;AACrC,UAAM,eAAe,OAAO;AAC5B,UAAM,YAAY,OAAO;AAGzB,UAAM,mBAAmB,gBAAgB;AACzC,UAAM,WAAW,YAAY;AAG7B,UAAM,aAAa,KAAK,IAAI,KAAK,IAAK,WAAW,mBAAoB,KAAK,CAAC,GAAG,GAAG;AAEjF,gBAAY,MAAM,QAAQ,GAAG,UAAU;AACvC,YAAQ;EACV,GAESC,YAAT,WAAoB;AAClB,QAAI,UAAU,MAAM;AAClB,cAAQ,sBAAsBD,eAAc;IAC9C;EACF;AAxBS,uBAAAA,iBAoBA,WAAAC;AAtBT,MAAI,QAAuB;AA6B3B,EAAAD,gBAAe;AAGf,SAAO,iBAAiB,UAAUC,WAAU,EAAE,SAAS,KAAK,CAAC;AAG7D,WAAS,iBAAiB,qBAAqB,MAAM;AACnD,WAAO,oBAAoB,UAAUA,SAAQ;AAC7C,QAAI,UAAU,MAAM;AAClB,2BAAqB,KAAK;IAC5B;EACF,CAAC;AACH;","names":["updateProgress","onScroll"]}}