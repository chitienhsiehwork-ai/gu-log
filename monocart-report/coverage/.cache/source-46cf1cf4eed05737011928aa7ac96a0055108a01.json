{"id":"46cf1cf4eed05737011928aa7ac96a0055108a01","url":"http://localhost:4321/src/components/ShareButton.astro?astro&type=script&index=0&lang.ts","source":"function initShareButtons() {\n  const container = document.querySelector(\".share-buttons\");\n  if (!container) return;\n  const title = container.getAttribute(\"data-title\") || document.title;\n  const url = window.location.href;\n  const copyText = container.getAttribute(\"data-copy-text\") || \"Copy link\";\n  const copiedText = container.getAttribute(\"data-copied-text\") || \"Copied!\";\n  const nativeBtn = container.querySelector(\".share-native\");\n  const fallback = container.querySelector(\".share-fallback\");\n  if (navigator.share) {\n    nativeBtn.style.display = \"inline-flex\";\n    fallback.style.display = \"none\";\n    nativeBtn.addEventListener(\"click\", async () => {\n      try {\n        await navigator.share({ title, url });\n      } catch (_e) {\n      }\n    });\n  } else {\n    nativeBtn.style.display = \"none\";\n    fallback.style.display = \"flex\";\n  }\n  const encodedUrl = encodeURIComponent(url);\n  const encodedTitle = encodeURIComponent(title);\n  const xBtn = container.querySelector(\".share-x\");\n  if (xBtn) xBtn.href = `https://x.com/intent/tweet?text=${encodedTitle}&url=${encodedUrl}`;\n  const fbBtn = container.querySelector(\".share-fb\");\n  if (fbBtn) fbBtn.href = `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`;\n  const lineBtn = container.querySelector(\".share-line\");\n  if (lineBtn) lineBtn.href = `https://social-plugins.line.me/lineit/share?url=${encodedUrl}`;\n  const copyBtn = container.querySelector(\".share-copy\");\n  if (copyBtn) {\n    copyBtn.addEventListener(\"click\", async () => {\n      try {\n        await navigator.clipboard.writeText(url);\n        const span = copyBtn.querySelector(\".copy-text\");\n        if (span) {\n          span.textContent = copiedText;\n          setTimeout(() => {\n            span.textContent = copyText;\n          }, 2e3);\n        }\n      } catch (_e) {\n        const input = document.createElement(\"input\");\n        input.value = url;\n        document.body.appendChild(input);\n        input.select();\n        document.execCommand(\"copy\");\n        document.body.removeChild(input);\n      }\n    });\n  }\n}\ninitShareButtons();\n","sourceMap":{"version":3,"sources":["ShareButton.astro"],"sourcesContent":["---\ninterface Props {\n  title: string;\n  lang?: 'zh-tw' | 'en';\n}\n\nconst { title, lang = 'zh-tw' } = Astro.props;\n\nconst i18n = {\n  'zh-tw': {\n    share: '分享這篇文章',\n    nativeShare: '分享',\n    copyLink: '複製連結',\n    copied: '已複製！',\n  },\n  en: {\n    share: 'Share this article',\n    nativeShare: 'Share',\n    copyLink: 'Copy link',\n    copied: 'Copied!',\n  },\n};\n\nconst t = i18n[lang];\n---\n\n<div class=\"share-section\">\n  <p class=\"share-label\">{t.share}</p>\n  <div\n    class=\"share-buttons\"\n    data-title={title}\n    data-copy-text={t.copyLink}\n    data-copied-text={t.copied}\n    data-native-text={t.nativeShare}\n  >\n    <!-- Native share button (hidden by default, shown via JS if supported) -->\n    <button class=\"share-btn share-native\" aria-label={t.nativeShare} style=\"display:none\">\n      <svg\n        width=\"18\"\n        height=\"18\"\n        viewBox=\"0 0 24 24\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        stroke-width=\"2\"\n        stroke-linecap=\"round\"\n        stroke-linejoin=\"round\"\n      >\n        <path d=\"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8\"></path>\n        <polyline points=\"16 6 12 2 8 6\"></polyline>\n        <line x1=\"12\" y1=\"2\" x2=\"12\" y2=\"15\"></line>\n      </svg>\n      <span>{t.nativeShare}</span>\n    </button>\n\n    <!-- Fallback buttons (shown when Web Share API is not available) -->\n    <div class=\"share-fallback\">\n      <!-- X / Twitter -->\n      <a\n        class=\"share-btn share-x\"\n        aria-label=\"Share on X\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n          <path\n            d=\"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z\"\n          ></path>\n        </svg>\n      </a>\n\n      <!-- Facebook -->\n      <a\n        class=\"share-btn share-fb\"\n        aria-label=\"Share on Facebook\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n          <path\n            d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"\n          ></path>\n        </svg>\n      </a>\n\n      <!-- LINE -->\n      <a\n        class=\"share-btn share-line\"\n        aria-label=\"Share on LINE\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n          <path\n            d=\"M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.346 0 .627.285.627.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314\"\n          ></path>\n        </svg>\n      </a>\n\n      <!-- Copy link -->\n      <button class=\"share-btn share-copy\" aria-label={t.copyLink}>\n        <svg\n          width=\"16\"\n          height=\"16\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          stroke-width=\"2\"\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n        >\n          <path d=\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"></path>\n          <path d=\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"></path>\n        </svg>\n        <span class=\"copy-text\">{t.copyLink}</span>\n      </button>\n    </div>\n  </div>\n</div>\n\n<script>\n  function initShareButtons() {\n    const container = document.querySelector('.share-buttons');\n    if (!container) return;\n\n    const title = container.getAttribute('data-title') || document.title;\n    const url = window.location.href;\n    const copyText = container.getAttribute('data-copy-text') || 'Copy link';\n    const copiedText = container.getAttribute('data-copied-text') || 'Copied!';\n\n    const nativeBtn = container.querySelector('.share-native') as HTMLElement;\n    const fallback = container.querySelector('.share-fallback') as HTMLElement;\n\n    // Web Share API available → show native button, hide fallback\n    if (navigator.share) {\n      nativeBtn.style.display = 'inline-flex';\n      fallback.style.display = 'none';\n\n      nativeBtn.addEventListener('click', async () => {\n        try {\n          await navigator.share({ title, url });\n        } catch (_e) {\n          // User cancelled — no-op\n        }\n      });\n    } else {\n      // No Web Share API → show fallback buttons\n      nativeBtn.style.display = 'none';\n      fallback.style.display = 'flex';\n    }\n\n    // Set fallback URLs\n    const encodedUrl = encodeURIComponent(url);\n    const encodedTitle = encodeURIComponent(title);\n\n    const xBtn = container.querySelector('.share-x') as HTMLAnchorElement;\n    if (xBtn) xBtn.href = `https://x.com/intent/tweet?text=${encodedTitle}&url=${encodedUrl}`;\n\n    const fbBtn = container.querySelector('.share-fb') as HTMLAnchorElement;\n    if (fbBtn) fbBtn.href = `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`;\n\n    const lineBtn = container.querySelector('.share-line') as HTMLAnchorElement;\n    if (lineBtn) lineBtn.href = `https://social-plugins.line.me/lineit/share?url=${encodedUrl}`;\n\n    // Copy link button\n    const copyBtn = container.querySelector('.share-copy') as HTMLButtonElement;\n    if (copyBtn) {\n      copyBtn.addEventListener('click', async () => {\n        try {\n          await navigator.clipboard.writeText(url);\n          const span = copyBtn.querySelector('.copy-text');\n          if (span) {\n            span.textContent = copiedText;\n            setTimeout(() => {\n              span.textContent = copyText;\n            }, 2000);\n          }\n        } catch (_e) {\n          // Fallback\n          const input = document.createElement('input');\n          input.value = url;\n          document.body.appendChild(input);\n          input.select();\n          document.execCommand('copy');\n          document.body.removeChild(input);\n        }\n      });\n    }\n  }\n\n  initShareButtons();\n</script>\n\n<style>\n  .share-section {\n    margin-top: 2rem;\n    padding: 1.25rem;\n    background: var(--color-surface);\n    border-radius: 8px;\n    text-align: center;\n  }\n\n  .share-label {\n    font-size: 0.85rem;\n    color: var(--color-text-muted);\n    margin-bottom: 0.75rem;\n  }\n\n  .share-buttons {\n    display: flex;\n    justify-content: center;\n  }\n\n  .share-fallback {\n    display: flex;\n    gap: 0.5rem;\n    align-items: center;\n    justify-content: center;\n    flex-wrap: wrap;\n  }\n\n  .share-btn {\n    display: inline-flex;\n    align-items: center;\n    gap: 0.4rem;\n    padding: 0.5rem 0.85rem;\n    border-radius: 6px;\n    font-size: 0.8rem;\n    cursor: pointer;\n    transition:\n      background 0.2s,\n      transform 0.1s;\n    text-decoration: none;\n    border: 1px solid var(--color-border);\n    background: var(--color-bg);\n    color: var(--color-text);\n    font-family: inherit;\n  }\n\n  .share-btn:hover {\n    background: var(--color-surface-hover);\n    transform: translateY(-1px);\n  }\n\n  .share-btn:active {\n    transform: translateY(0);\n  }\n\n  .share-native {\n    padding: 0.6rem 1.2rem;\n    font-size: 0.9rem;\n    background: var(--color-accent);\n    color: #fff;\n    border-color: var(--color-accent);\n  }\n\n  .share-native:hover {\n    opacity: 0.9;\n    background: var(--color-accent);\n  }\n\n  .share-x:hover {\n    color: #000;\n  }\n  .share-fb:hover {\n    color: #1877f2;\n  }\n  .share-line:hover {\n    color: #06c755;\n  }\n  .share-copy:hover {\n    color: var(--color-accent);\n  }\n\n  [data-theme='dark'] .share-x:hover {\n    color: #fff;\n  }\n</style>"],"mappings":"AAwHE,SAAS,mBAAmB;AAC1B,QAAM,YAAY,SAAS,cAAc,gBAAgB;AACzD,MAAI,CAAC,UAAW;AAEhB,QAAM,QAAQ,UAAU,aAAa,YAAY,KAAK,SAAS;AAC/D,QAAM,MAAM,OAAO,SAAS;AAC5B,QAAM,WAAW,UAAU,aAAa,gBAAgB,KAAK;AAC7D,QAAM,aAAa,UAAU,aAAa,kBAAkB,KAAK;AAEjE,QAAM,YAAY,UAAU,cAAc,eAAe;AACzD,QAAM,WAAW,UAAU,cAAc,iBAAiB;AAG1D,MAAI,UAAU,OAAO;AACnB,cAAU,MAAM,UAAU;AAC1B,aAAS,MAAM,UAAU;AAEzB,cAAU,iBAAiB,SAAS,YAAY;AAC9C,UAAI;AACF,cAAM,UAAU,MAAM,EAAE,OAAO,IAAI,CAAC;MACtC,SAAS,IAAI;MAEb;IACF,CAAC;EACH,OAAO;AAEL,cAAU,MAAM,UAAU;AAC1B,aAAS,MAAM,UAAU;EAC3B;AAGA,QAAM,aAAa,mBAAmB,GAAG;AACzC,QAAM,eAAe,mBAAmB,KAAK;AAE7C,QAAM,OAAO,UAAU,cAAc,UAAU;AAC/C,MAAI,KAAM,MAAK,OAAO,mCAAmC,YAAY,QAAQ,UAAU;AAEvF,QAAM,QAAQ,UAAU,cAAc,WAAW;AACjD,MAAI,MAAO,OAAM,OAAO,gDAAgD,UAAU;AAElF,QAAM,UAAU,UAAU,cAAc,aAAa;AACrD,MAAI,QAAS,SAAQ,OAAO,mDAAmD,UAAU;AAGzF,QAAM,UAAU,UAAU,cAAc,aAAa;AACrD,MAAI,SAAS;AACX,YAAQ,iBAAiB,SAAS,YAAY;AAC5C,UAAI;AACF,cAAM,UAAU,UAAU,UAAU,GAAG;AACvC,cAAM,OAAO,QAAQ,cAAc,YAAY;AAC/C,YAAI,MAAM;AACR,eAAK,cAAc;AACnB,qBAAW,MAAM;AACf,iBAAK,cAAc;UACrB,GAAG,GAAI;QACT;MACF,SAAS,IAAI;AAEX,cAAM,QAAQ,SAAS,cAAc,OAAO;AAC5C,cAAM,QAAQ;AACd,iBAAS,KAAK,YAAY,KAAK;AAC/B,cAAM,OAAO;AACb,iBAAS,YAAY,MAAM;AAC3B,iBAAS,KAAK,YAAY,KAAK;MACjC;IACF,CAAC;EACH;AACF;AAEA,iBAAiB;","names":[]}}