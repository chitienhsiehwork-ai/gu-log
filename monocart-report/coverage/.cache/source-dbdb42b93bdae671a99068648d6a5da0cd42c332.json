{"id":"dbdb42b93bdae671a99068648d6a5da0cd42c332","url":"http://localhost:4321/auth/callback","source":"\n      (function() {\n        const JWT_KEY = 'gu-log-jwt';\n        const RETURN_KEY = 'gu-log-return-url';\n\n        // Try query param first, then hash fragment\n        const params = new URLSearchParams(window.location.search);\n        let token = params.get('token');\n\n        if (!token && window.location.hash) {\n          const hashParams = new URLSearchParams(window.location.hash.substring(1));\n          token = hashParams.get('token');\n        }\n\n        if (token) {\n          localStorage.setItem(JWT_KEY, token);\n          document.getElementById('status').textContent = 'Login successful! Redirecting...';\n\n          // Redirect back to the page user was on\n          const returnUrl = localStorage.getItem(RETURN_KEY) || '/';\n          localStorage.removeItem(RETURN_KEY);\n\n          setTimeout(function() {\n            window.location.href = returnUrl;\n          }, 500);\n        } else {\n          document.getElementById('status').textContent = 'Login failed.';\n          var errorEl = document.getElementById('error');\n          errorEl.style.display = 'block';\n          errorEl.textContent = 'No token received. Please try again.';\n\n          setTimeout(function() {\n            window.location.href = '/';\n          }, 3000);\n        }\n      })();\n    "}