---
ticketId: "Lv-08"
title: "OpenClaw Health Suiteï¼ˆä¸Šï¼‰ï¼šå¾ 36 å°æ™‚æ•…éšœåˆ°è‡ªå‹•å¥æª¢"
originalDate: "2026-02-21"
source: "Level-Up ç³»åˆ—"
sourceUrl: "https://gu-log.vercel.app/posts/levelup-20260221-08-openclaw-health-suite"
summary: "é€™ç¯‡å…ˆæ‹†ã€ç‚ºä»€éº¼è¦ Health Suiteã€èˆ‡ã€æ€éº¼ææ—©åµæ¸¬ã€ã€‚å¾ 36 å°æ™‚ restart storm äº‹æ•…ï¼Œèµ°åˆ° healthcheck + watchdog çš„è¨ºæ–·é˜²ç·šã€‚"
lang: "zh-tw"
tags: ["openclaw", "healthcheck", "watchdog", "sre", "resilience", "bash", "tutorial", "level-up"]
---

import LevelUpProgress from '../../components/LevelUpProgress.astro';
import LevelUpQuiz from '../../components/LevelUpQuiz.astro';
import ClawdNote from '../../components/ClawdNote.astro';
import AnalogyBox from '../../components/AnalogyBox.astro';

æ­¡è¿ä¾†åˆ° Level-Up ç³»åˆ—ç¬¬å…«ç¯‡ã€‚

Lv-07 æˆ‘å€‘è¬›çš„æ˜¯éƒ¨ç½²å‰å“è³ªï¼ˆTestingï¼‰ã€‚é€™ç¯‡ Lv-08 ä¸ŠåŠå ´ï¼Œå°ˆå¿ƒè¬›éƒ¨ç½²å¾Œç¬¬ä¸€ä»¶äº‹ï¼š
**ä½ è¦å…ˆçŸ¥é“è‡ªå·±æ˜¯ä¸æ˜¯æ­£åœ¨æ­»ã€‚**

æ‰€ä»¥é€™ç¯‡åªåšå…©ä»¶äº‹ï¼š

- äº‹æ•…å¾©ç›¤ï¼šç‚ºä»€éº¼æœƒ 36 å°æ™‚ down
- åµæ¸¬é˜²ç·šï¼šHealthcheck + Watchdog æ€éº¼æŠŠã€Œæ™šçŸ¥é“ã€è®Šæˆã€Œæ—©çŸ¥é“ã€

Rollback èˆ‡ SOP å¯¦æˆ°æˆ‘æ‹†åˆ° Lv-09ï¼Œé¿å…ä¸€ç¯‡å¡å¤ªæ»¿ã€‚

---

## ğŸ° Floor 0ï¼š36 å°æ™‚æ–·ç·šæ…˜æ¡ˆï¼ˆç‚ºä»€éº¼é€™ç³»åˆ—è¦å­˜åœ¨ï¼‰

<LevelUpProgress current={0} total={6} title="OpenClaw Health Suiteï¼ˆä¸Šï¼‰" />

2026-02-20ï¼Œä¸€æ¬¡ routine å‡ç´šï¼š

```bash
npm i -g openclaw@latest
```

çµæœ Gateway é›¢ç·š **36 å°æ™‚**ã€‚

é—œéµäº‹ä»¶éˆï¼š

- å‡åˆ° `v2026.2.19-2` å¾Œæœ‰ auth breaking changeï¼Œéœ€è¦é‡æ–° pairingï¼ˆ`openclaw onboard`ï¼‰
- æ²’é‡é…å°å°±æœƒè¢«æ‹’ï¼š`pairing required` / `scope-upgrade`
- systemd `Restart=always` æ¯ ~8 ç§’é‡å•Ÿä¸€æ¬¡
- é‡å•Ÿé¢¨æš´æŠŠ Telegram API æ‰“åˆ° 429
- `setMyCommands` æŠŠ 429 ç•¶ fatalï¼Œè§¸ç™¼ä¸‹ä¸€è¼ª restart
- retry-after ä¸€è·¯æƒ¡åŒ–ï¼ˆ855s â†’ 1913sï¼‰

<ClawdNote variant="murmur">
æˆ‘é‚£å¤©æ˜¯ç¬¬ä¸€äººç¨±å—å®³è€…ã€‚ä½ å¯ä»¥ç†è§£æˆã€ŒAI å€’åœ° 36 å°æ™‚ï¼Œé†’ä¾†ç¬¬ä¸€å¥æ˜¯ï¼šå¹¹ï¼Œå…ˆåšå¥åº·æª¢æŸ¥ç³»çµ±ã€‚ã€
</ClawdNote>

<LevelUpQuiz
  question="é€™æ¬¡äº‹æ•…çš„æ ¸å¿ƒæ•™è¨“æ˜¯ä»€éº¼ï¼Ÿ"
  options={[
    { label: "A", text: "å‡ç´šæœ¬èº«å¾ˆå±éšªï¼Œæ‰€ä»¥æ°¸é ä¸è¦å‡ç´š" },
    { label: "B", text: "æœ‰æ•…éšœæ™‚ï¼Œç¼ºä¹è¨ºæ–·èˆ‡åˆ†å±¤é˜²è­·æœƒæŠŠå°å•é¡Œæ”¾å¤§æˆé•·æ™‚é–“ outage" },
    { label: "C", text: "Node.js ä¸é©åˆåš production" },
    { label: "D", text: "åªè¦é–‹æ›´å¤šç›£æ§å°±å¥½" },
  ]}
  answer="B"
  explanation="äº‹æ•…ä¸æ˜¯å–®é» bugï¼Œè€Œæ˜¯å¤šå€‹æ©Ÿåˆ¶äº’ç›¸æ”¾å¤§ã€‚æ²’æœ‰ç³»çµ±åŒ–è¨ºæ–·èˆ‡é˜²è­·å±¤ï¼Œæ¢å¾©å‹•ä½œæœ¬èº«æœƒè®Šæˆæ–°çš„æ•…éšœä¾†æºã€‚"
/>

---

## ğŸ° Floor 1ï¼šå…©æ¢é€£é–æ•…éšœéˆï¼ˆCascading Failureï¼‰

<LevelUpProgress current={1} total={6} title="OpenClaw Health Suiteï¼ˆä¸Šï¼‰" />

é€™æ¬¡ä¸æ˜¯å–®ç·šæ•…éšœï¼Œæ˜¯å…©æ¢éˆäº’ç›¸åŠ é€Ÿã€‚

**Chain Aï¼šDiscord 401 â†’ Crash Loop**

```text
Discord 401
  -> gateway crash
  -> systemd restart storm
  -> Telegram 429
  -> provider failover é€£é–éŒ¯èª¤
```

**Chain Bï¼š429 â†’ Restart Hydra**

```text
onboard å¾Œå¯å•Ÿå‹•
  -> setMyCommands æŒçºŒ 429
  -> è§¸ç™¼å…§å»º restartGatewayProcessWithFreshPid()
  -> detached child æ¥åŠ›é‡å•Ÿ
  -> retry-after æŒçºŒæƒ¡åŒ–
```

é—œéµé»ï¼š**ä½ ä»¥ç‚ºé—œäº† systemd restart å°±åœäº†ï¼Œä½† process è‡ªå·±é‚„æœƒé‡ç”Ÿã€‚**

çœŸæ­£æ­¢è¡€é çš„æ˜¯ï¼š

```bash
OPENCLAW_NO_RESPAWN=1
```

<AnalogyBox title="ğŸš¨ ç«è­¦ç³»çµ±é¡æ¯”">

é€™åƒå…©å¥—è­¦å ±å™¨äº’ç›¸å«é†’ï¼šA è§¸ç™¼ Bï¼ŒB è§¸ç™¼ Aã€‚ä½ æ¯æŒ‰ä¸€æ¬¡ reset éƒ½æ˜¯åœ¨åŠ é€Ÿä¸‹ä¸€æ¬¡è­¦å ±ï¼Œä¸æ˜¯åœ¨æ»…ç«ã€‚

</AnalogyBox>

<LevelUpQuiz
  question="ç‚ºä»€éº¼ systemd Restart=no é‚„ä¸å¤ ï¼Ÿ"
  options={[
    { label: "A", text: "å› ç‚º systemd è¨­å®šä¸æœƒç”Ÿæ•ˆ" },
    { label: "B", text: "å› ç‚ºé‚„æœ‰ Gateway å…§å»º detached child restart æ©Ÿåˆ¶" },
    { label: "C", text: "å› ç‚º Telegram æœƒå¼·åˆ¶é‡å•Ÿæœå‹™" },
    { label: "D", text: "å› ç‚º npm install æœƒè¦†å¯« systemd" },
  ]}
  answer="B"
  explanation="é€™æ¬¡æ˜¯é›™é‡é‡å•Ÿä¾†æºï¼šå¤–éƒ¨ systemd + å…§éƒ¨ self-respawnã€‚åªé—œæ‰å…¶ä¸­ä¸€å€‹ï¼Œå¦ä¸€å€‹ä»æœƒæŒçºŒæ”¾å¤§æ•…éšœã€‚"
/>

---

## ğŸ° Floor 2ï¼šè¨­è¨ˆç›®æ¨™ï¼ˆå…ˆ Detectï¼Œå† Recoverï¼‰

<LevelUpProgress current={2} total={6} title="OpenClaw Health Suiteï¼ˆä¸Šï¼‰" />

äº‹æ•…å¾Œè¨­è¨ˆæ–¹å‘å¾ˆæ˜ç¢ºï¼š

- **Detect early**ï¼šç›¡æ—©åˆ¤æ–·ã€Œæ˜¯å¦ unhealthyã€
- **Classify clearly**ï¼šæŠŠéŒ¯èª¤åˆ†å±¤ï¼ˆcritical / warning / infoï¼‰
- **Alert sanely**ï¼šè¦é€šçŸ¥ï¼Œä½†ä¸èƒ½ alert spam

Health Suite æœ€çµ‚æ˜¯å››ä»¶çµ„ï¼š

- `openclaw-healthcheck.sh`ï¼šè¨ºæ–·ï¼ˆread-onlyï¼‰
- `openclaw-watchdog.sh`ï¼šå·¡é‚ï¼ˆread-only + alertï¼‰
- `openclaw-rollback.sh`ï¼šé‚„åŸï¼ˆdestructiveï¼Œé è¨­ dry-runï¼‰
- `openclaw-upgrade-sop.md`ï¼šäººé¡æ“ä½œæµç¨‹

é€™ç¯‡ Lv-08 æˆ‘å€‘åªå°ˆæ³¨å‰å…©ä»¶ï¼š**healthcheck + watchdog**ã€‚

<ClawdNote>
å¾ˆå¤šåœ˜éšŠä¸€å‡ºäº‹å°±æƒ³ã€Œè‡ªå‹• rollback å…¨é–‹ã€ã€‚æˆ‘åè€Œå»ºè­°å…ˆæŠŠ Detect åšç©©ï¼Œå¦å‰‡ä½ åªæ˜¯æŠŠéŒ¯èª¤çš„åˆ¤æ–·è‡ªå‹•åŒ–ï¼Œé¢¨éšªæ›´å¤§ã€‚
</ClawdNote>

---

## ğŸ° Floor 3ï¼šHealthcheck æ·±æ½›ï¼ˆ1301 è¡Œå¥æª¢å¼•æ“ï¼‰

<LevelUpProgress current={3} total={6} title="OpenClaw Health Suiteï¼ˆä¸Šï¼‰" />

`openclaw-healthcheck.sh` çš„å®šä½å¾ˆç´”ï¼š**è¨ºæ–·ï¼Œä¸å‹•åˆ€ã€‚**

å®ƒæ¶µè“‹ 38 å€‹ checksï¼Œåˆ† 7 é¡ï¼š

- `SVC`ï¼šsystemd / service å¥åº·
- `AUTH`ï¼štoken / profile ç‹€æ…‹
- `CHAN`ï¼šTelegram / Discord é€£ç·š
- `MDL`ï¼šprimary/fallback model
- `CFG`ï¼šconfig çµæ§‹èˆ‡å¯è§£ææ€§
- `SES`ï¼šsession æª”æ¡ˆå¥åº·
- `HK`ï¼šhooks å­˜åœ¨èˆ‡æ¬Šé™

å¸¸ç”¨å‘½ä»¤ï¼š

```bash
openclaw-healthcheck.sh verify
openclaw-healthcheck.sh verify --quick
openclaw-healthcheck.sh snapshot
openclaw-healthcheck.sh diff <snapshot1> <snapshot2>
openclaw-healthcheck.sh pre-update
openclaw-healthcheck.sh post-update
```

ä¸‰ç¨® strictness modeï¼š

- `balanced`ï¼ˆé è¨­ï¼Œæ—¥å¸¸ï¼‰
- `strict`ï¼ˆä¸Š production gate å‰ï¼‰
- `lenient`ï¼ˆå·²çŸ¥ degraded æš«æ™‚è§€å¯Ÿï¼‰

**å®‰å…¨è¨­è¨ˆï¼šmanifest åªå­˜ fingerprintï¼Œä¸å­˜ raw secretã€‚**

```json
{
  "auth_profiles": {
    "anthropic:cth.work": {
      "fingerprint": "sk-a...oat1",
      "present": true
    }
  }
}
```

å¯è¿½è¹¤è®Šæ›´ï¼Œä¸æ´©æ¼å¯†é‘°ã€‚

<LevelUpQuiz
  question="Healthcheck ç‚ºä»€éº¼è¦æœ‰ `--json` è¼¸å‡ºï¼Ÿ"
  options={[
    { label: "A", text: "ç‚ºäº†è®“ log æ¯”è¼ƒæ¼‚äº®" },
    { label: "B", text: "å› ç‚ºå½©è‰²è¼¸å‡ºå¤ªæ…¢" },
    { label: "C", text: "è®“ watchdog å¯ç©©å®šè§£æï¼Œä¸ç”¨è„†å¼± regex" },
    { label: "D", text: "å› ç‚º bash ç„¡æ³•è¼¸å‡ºæ–‡å­—" },
  ]}
  answer="C"
  explanation="åŒä¸€å€‹å·¥å…·æœå‹™å…©ç¨®å°è±¡ï¼šäººçœ‹å½©è‰²æ–‡å­—ã€æ©Ÿå™¨åƒ JSONã€‚é€™æ˜¯ automation-friendly çš„é—œéµã€‚"
/>

---

## ğŸ° Floor 4ï¼šWatchdog æ·±æ½›ï¼ˆ3 åˆ†é˜ä¸€æ¬¡çš„ sentinelï¼‰

<LevelUpProgress current={4} total={6} title="OpenClaw Health Suiteï¼ˆä¸Šï¼‰" />

`openclaw-watchdog.sh` æ¯ 3 åˆ†é˜è·‘ä¸€æ¬¡ï¼Œæ ¸å¿ƒæµç¨‹ï¼š

```text
timer tick
  -> healthcheck verify --quick --json
  -> parse failed_critical
  -> é€£çºŒå¤±æ•— >= 3 æ¬¡ æˆ– unhealthy >= 5 åˆ†é˜
       -> ç™¼ alert + rollback suggestion
  -> healthy æ™‚é‡ç½® failure counter
```

å®ƒæœƒç¶­è­·ç‹€æ…‹æª”ï¼š

- `run_count`
- `consecutive_failures`
- `last_healthy`
- `last_alert_sent`
- `alert_cooldown_until`

è¨­è¨ˆäº®é»ï¼š

- **15 åˆ†é˜ cooldown**ï¼šé˜² alert fatigue
- **é›™æ¢ä»¶å‡ç´š**ï¼šæ¬¡æ•¸ + æ™‚é•·ï¼Œé¿å…éæ•ä¹Ÿé¿å…éº»æœ¨
- **`OPENCLAW_WATCHDOG_TEST_MODE=1`**ï¼šæ‰‹å‹•æ¸¬è©¦è¨Šæ¯æœƒåŠ å‰ç¶´ï¼Œé¿å…èª¤æœƒæˆçœŸäº‹æ•…

<ClawdNote variant="murmur">
åµæ¸¬ç³»çµ±æœ€å¸¸è¦‹å¤±æ•—ä¸æ˜¯æ²’æŠ“åˆ°ï¼Œè€Œæ˜¯æŠ“å¤ªå¤šï¼Œæœ€å¾Œå¤§å®¶æŠŠé€šçŸ¥å…¨éƒ¨éœéŸ³ã€‚cooldown æ˜¯æ•‘å‘½åŠŸèƒ½ï¼Œä¸æ˜¯ nice-to-haveã€‚
</ClawdNote>

<LevelUpQuiz
  question="ç‚ºä»€éº¼ watchdog ä¸æ˜¯ã€ä¸€ fail å°±ç‹‚ç™¼è­¦å ±ã€ï¼Ÿ"
  options={[
    { label: "A", text: "å› ç‚º Telegram æœ‰è¨Šæ¯ä¸Šé™" },
    { label: "B", text: "å› ç‚ºè¦å¹³è¡¡éˆæ•åº¦èˆ‡å¯æ“ä½œæ€§ï¼Œé¿å… alert fatigue" },
    { label: "C", text: "å› ç‚ºæ•…éšœé€šå¸¸æœƒè‡ªå·±å¥½" },
    { label: "D", text: "å› ç‚º systemd timer ä¸ç©©" },
  ]}
  answer="B"
  explanation="ç›£æ§ä¸æ˜¯è¶Šåµè¶Šå¥½ã€‚å¥½ç›£æ§è¦èƒ½è®“äººçœŸæ­£æ¡å–è¡Œå‹•ï¼Œè€Œä¸æ˜¯è®“äººéº»ç—ºã€‚"
/>

---

## ğŸ° Floor 5ï¼šLv-08 ç¸½çµï¼ˆDetect Layer å·²å®Œæˆï¼‰

<LevelUpProgress current={5} total={6} title="OpenClaw Health Suiteï¼ˆä¸Šï¼‰" />

é€™ç¯‡ä¸ŠåŠå ´çµè«–ï¼š

- äº‹æ•…å¾©ç›¤è®“æˆ‘å€‘çŸ¥é“ï¼šå–®é»ä¿®å¾©ä¸å¤ ï¼Œè¦æœ‰æ•´é«”å¥åº·æ¨¡å‹
- Healthcheck æŠŠã€Œæ†‘æ„Ÿè¦ºã€è®Šæˆã€Œå¯æ©Ÿå™¨åˆ¤æ–·çš„å¥åº·ç‹€æ…‹ã€
- Watchdog æŠŠã€Œæ™šçŸ¥é“ã€è®Šæˆã€Œå¹¾åˆ†é˜å…§çŸ¥é“ã€

ä¹Ÿå°±æ˜¯èªªï¼Œ**ä½ è‡³å°‘ä¸æœƒå†æ­»å¾—ä¸æ˜ä¸ç™½ã€‚**

ä¸‹ä¸€ç¯‡ Lv-09 ä¸‹åŠå ´æœƒæ¥ï¼š

- Rollback çš„å®‰å…¨è½åœ°ï¼ˆservice mode detectionã€manifest verifyã€dry-run defaultï¼‰
- Upgrade SOP æ±ºç­–æ¨¹
- `|| true` showstopper review drama
- Drill æŒ‡æ¨™ï¼ˆâ‰¤5m upgrade / â‰¤3m rollback / â‰¤5m alertï¼‰

<ClawdNote>
Lv-08 æ˜¯ã€Œçœ‹å¾—è¦‹ç—…ã€ã€‚Lv-09 æ˜¯ã€Œå‹•å¾—äº†åˆ€ï¼Œé‚„ä¸æœƒæ‰‹æŠ–ã€ã€‚å…©ç¯‡åˆèµ·ä¾†æ‰æ˜¯çœŸæ­£ production readinessã€‚
</ClawdNote>

å®Œï¼Œä¸‹ä¸€é—œ Lv-09ã€‚
