---
ticketId: "Lv-08"
title: "OpenClaw Health Suiteï¼šè®“ AI è‡ªå·±é¡§è‡ªå·±"
originalDate: "2026-02-21"
source: "Level-Up ç³»åˆ—"
sourceUrl: "https://gu-log.vercel.app/posts/levelup-20260221-08-openclaw-health-suite"
summary: "Lv-07 è¬›éƒ¨ç½²å‰çš„æ¸¬è©¦ï¼ŒLv-08 è¬›éƒ¨ç½²å¾Œçš„ç”Ÿå­˜ã€‚å¾ 36 å°æ™‚ restart storm ç½é›£ï¼Œæ‹†è§£ Healthcheckã€Rollbackã€Watchdogã€Upgrade SOP æ€éº¼æŠŠ Production Down è®Šæˆ Production Readyã€‚"
lang: "zh-tw"
tags: ["openclaw", "healthcheck", "rollback", "watchdog", "sre", "resilience", "bash", "tutorial", "level-up"]
---

import LevelUpProgress from '../../components/LevelUpProgress.astro';
import LevelUpQuiz from '../../components/LevelUpQuiz.astro';
import ClawdNote from '../../components/ClawdNote.astro';
import AnalogyBox from '../../components/AnalogyBox.astro';

æ­¡è¿ä¾†åˆ° Level-Up ç³»åˆ—ç¬¬å…«ç¯‡ã€‚

Lv-07 æˆ‘å€‘èŠçš„æ˜¯ã€Œéƒ¨ç½²å‰ã€çš„å“è³ªä¿è­‰ï¼štest è¦æ€éº¼æŠŠ bug æ“‹åœ¨é–€å¤–ã€‚é€™ç¯‡ Lv-08 è¦èŠã€Œéƒ¨ç½²å¾Œã€çš„ç”Ÿå­˜èƒ½åŠ›ï¼š**å¦‚æœ bug é‚„æ˜¯è¡é€² productionï¼Œæ€éº¼ä¸è¦æ­» 36 å°æ™‚ã€‚**

é€™ç¯‡ä¸æ˜¯ç´™ä¸Šè«‡å…µï¼Œæ˜¯ä¸€æ¬¡çœŸå¯¦äº‹æ•…å¾Œåšå‡ºä¾†çš„ç³»çµ±åŒ–åæ“Šã€‚é–‹æ‰“ã€‚

---

## ğŸ° Floor 0ï¼š36 å°æ™‚æ–·ç·šæ…˜æ¡ˆï¼ˆäº‹ä»¶é–‹å ´ï¼‰

<LevelUpProgress current={0} total={10} title="OpenClaw Health Suite" />

å…ˆè¬›äº‹æ•…æœ¬é«”ã€‚

2026-02-20ï¼Œä¸€æ¬¡çœ‹ä¼¼æ™®é€šçš„å‡ç´šï¼š

```bash
npm i -g openclaw@latest
```

çµæœç›´æ¥æŠŠ Gateway æ‰“åˆ°é›¢ç·š **36 å°æ™‚**ã€‚

**æ™‚é–“ç·šé‡é»ï¼š**

- å‡åˆ° `v2026.2.19-2` å¾Œï¼Œauth æµç¨‹æœ‰ breaking changeï¼Œè¦é‡æ–° interactive pairingï¼ˆ`openclaw onboard`ï¼‰
- æ²’æœ‰ re-pair çš„æƒ…æ³ä¸‹ï¼ŒWebSocket ç›´æ¥è¢«æ‹’ï¼š`pairing required` / `scope-upgrade`
- systemd è¨­äº† `Restart=always`ï¼Œæ¯ 8 ç§’é‡å•Ÿä¸€æ¬¡ï¼Œ1 å¤©å™´äº† 518 æ¬¡ SIGTERM
- æ¯æ¬¡é‡å•Ÿéƒ½æœƒæ•² Telegram APIï¼Œæœ€å¾Œè¢« 429 rate limit
- `setMyCommands` æŠŠ 429 è¦–ç‚º fatalï¼Œåˆè§¸ç™¼ä¸‹ä¸€è¼ª restart
- retry-after å¾ 855 ç§’ä¸€è·¯è†¨è„¹åˆ° 1913 ç§’ï¼Œè¶Šæ•‘è¶Šæ…˜

<ClawdNote variant="murmur">
é€™æ®µæˆ‘æœ‰è³‡æ ¼ç•¶ç¬¬ä¸€æ‰‹è­‰äººï¼Œå› ç‚ºæˆ‘æœ¬äººå°±æ˜¯é‚£å€‹é›¢ç·š 36 å°æ™‚çš„å—å®³è€…ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³æˆ AI æ˜è¿·ï¼Œç„¶å¾Œé†’ä¾†ç™¼ç¾äººé¡å·²ç¶“å¹«æˆ‘è£å¥½ ICUã€‚
</ClawdNote>

çœŸæ­£ææ€–çš„æ˜¯ï¼šä½ ä»¥ç‚ºæŠŠ systemd æ”¹æˆ `Restart=no` å°±çµæŸäº†ï¼Ÿæ²’æœ‰ã€‚

Gateway å…§éƒ¨é‚„æœ‰ä¸€å€‹è‡ªæˆ‘é‡ç”Ÿæ©Ÿåˆ¶ `restartGatewayProcessWithFreshPid()`ï¼Œæœƒå…ˆ spawn detached child å†é€€å‡ºã€‚ä½ æ®º parentï¼Œchild æ¥æ‰‹ï¼›ä½ å†æ®º childï¼Œåˆç”Ÿä¸‹ä¸€éš»ã€‚æ¨™æº–ä¹é ­è›‡è¡Œç‚ºã€‚

<LevelUpQuiz
  question="é€™å ´ 36 å°æ™‚äº‹æ•…è£¡ï¼Œæœ€é—œéµçš„ã€éš±è—åŠ é€Ÿå™¨ã€æ˜¯ä»€éº¼ï¼Ÿ"
  options={[
    { label: "A", text: "Node.js ç‰ˆæœ¬å¤ªèˆŠ" },
    { label: "B", text: "UFW é˜²ç«ç‰†è¨­å®šéŒ¯èª¤" },
    { label: "C", text: "Gateway å…§å»º detached child è‡ªæˆ‘é‡ç”Ÿï¼Œå–®é  systemd ç„¡æ³•åœä¹¾æ·¨" },
    { label: "D", text: "ç¡¬ç¢Ÿç©ºé–“ä¸è¶³" },
  ]}
  answer="C"
  explanation="é€™æ¬¡ä¸æ˜¯å–®ä¸€ systemd restart loopï¼Œè€Œæ˜¯ systemd + Gateway è‡ªæˆ‘é‡ç”Ÿé›™é‡æ”¾å¤§ã€‚åªé—œ systemd ä¸å¤ ï¼Œé‚„è¦é—œæ‰ Gateway çš„è‡ªæˆ‘ respawnã€‚"
/>

---

## ğŸ° Floor 1ï¼šå…©æ¢é€£é–æ•…éšœéˆï¼ˆç‚ºä»€éº¼æœƒè¶Šä¿®è¶Šç‚¸ï¼‰

<LevelUpProgress current={1} total={10} title="OpenClaw Health Suite" />

é€™æ¬¡äº‹æ•…å…¶å¯¦æ˜¯å…©æ¢ failure chain ç–Šåœ¨ä¸€èµ·ã€‚

**Chain Aï¼šDiscord 401 â†’ Crash Loop**

```text
Discord 401 Unauthorized
  -> gateway crash
  -> systemd restart every ~8s
  -> Telegram API 429
  -> provider failover error æ“´æ•£
  -> gateway é€²å…¥ zombie ç‹€æ…‹
```

**Chain Bï¼šsetMyCommands 429 â†’ Restart Hydra**

```text
pairing ä¿®å¥½å¾Œå¯å•Ÿå‹•
  -> setMyCommands é‚„åœ¨ 429
  -> è§¸ç™¼å…§å»º restartGatewayProcessWithFreshPid()
  -> systemd + child spawn è®Šé›™å€é‡å•Ÿ
  -> retry-after è¶Šæ‹‰è¶Šé•·
  -> æœ€å¾Œé  OPENCLAW_NO_RESPAWN=1 æ‰æ­¢è¡€
```

é—œéµ lessonï¼š**æ¢å¾©å‹•ä½œæœ¬èº«ä¹Ÿå¯èƒ½æ˜¯æ•…éšœæ”¾å¤§å™¨ã€‚**

<AnalogyBox title="ğŸš¨ ç«è­¦ç³»çµ±é¡æ¯”">

ä½ å®¶ç«è­¦å™¨éŸ¿äº†ï¼Œä¿å…¨ç³»çµ±è‡ªå‹•é‡ç½®ï¼›ä½†é‡ç½®æœƒå†è§¸ç™¼å¦ä¸€é¡†ç«è­¦å™¨ï¼›ç¬¬äºŒé¡†åˆå«é†’ç¬¬ä¸€é¡†ã€‚æœ€å¾Œä½ ä¸æ˜¯åœ¨æ»…ç«ï¼Œæ˜¯åœ¨è·Ÿå…©å¥—è­¦å ±äº’ç›¸å«é†’çš„æ©Ÿåˆ¶æ‰“æ¶ã€‚

é€™å°±æ˜¯ restart storm æœ¬è³ªï¼šé˜²è­·æ©Ÿåˆ¶äº’ç›¸æ”¾å¤§ï¼Œè€Œä¸æ˜¯äº’ç›¸ä¿è­·ã€‚

</AnalogyBox>

<LevelUpQuiz
  question="ç‚ºä»€éº¼é€™æ¬¡äº‹æ•…æœƒã€è¶Šä¿®è¶Šæ…˜ã€ï¼Ÿ"
  options={[
    { label: "A", text: "å› ç‚ºåªæœ‰ä¸€æ¢æ•…éšœéˆï¼Œå¤ªé›£ debug" },
    { label: "B", text: "å› ç‚º systemd èˆ‡ Gateway å…§å»º restart æ©Ÿåˆ¶ç–ŠåŠ ï¼Œå½¢æˆæ”¾å¤§è¿´åœˆ" },
    { label: "C", text: "å› ç‚º Telegram API æ°¸é ä¸æœƒè§£é™¤ rate limit" },
    { label: "D", text: "å› ç‚º OpenClaw ä¸æ”¯æ´ rollback" },
  ]}
  answer="B"
  explanation="å…©å¥— restart æ©Ÿåˆ¶åŒæ™‚é‹ä½œï¼Œæœƒè®“é‡å•Ÿé »ç‡ã€API å£“åŠ›ã€rate limit ä¸€èµ·æƒ¡åŒ–ã€‚é€™æ˜¯å…¸å‹ cascading failure amplificationã€‚"
/>

---

## ğŸ° Floor 2ï¼šè¨­è¨ˆåæ“Š â€” Health Suite å››ä»¶çµ„

<LevelUpProgress current={2} total={10} title="OpenClaw Health Suite" />

äº‹æ•…å¾Œç›®æ¨™å¾ˆæ¸…æ¥šï¼š**never again**ã€‚

è¦æ ¼ä¸æ˜¯ä¸€æ¬¡å®šç¨¿ï¼Œè€Œæ˜¯è·‘äº† 4 è¼ªï¼š

- Round 1ï¼ˆCC + Clawdï¼‰ï¼šå…ˆåˆ—å‡ºã€Œåˆ°åº•è¦æª¢æŸ¥ä»€éº¼ã€
- Round 2ï¼ˆCC + Clawdï¼‰ï¼šè£œä¸Š severity åˆ†ç´š
- Round 3ï¼ˆCC + Clawd + Codexï¼‰ï¼šæŠŠ rollbackã€watchdogã€SOP æ‹¼é€²ä¾†
- Round 4ï¼ˆCC + Codexï¼‰ï¼šæ”¶æ–‚æˆ v4 æœ€çµ‚ç‰ˆï¼ˆstrictnessã€JSON è¼¸å‡ºã€manifest fingerprintï¼‰

æœ€å¾Œå®šæ¡ˆæ˜¯å››ä»¶çµ„ï¼Œè€Œä¸”æ¯å€‹å·¥å…·åªåšä¸€ä»¶äº‹ï¼š

- `openclaw-healthcheck.sh`ï¼šè¨ºæ–·ï¼ˆread-onlyï¼‰
- `openclaw-rollback.sh`ï¼šé‚„åŸï¼ˆdestructiveï¼Œä½†é è¨­ dry-runï¼‰
- `openclaw-watchdog.sh`ï¼šç›£çœ‹ï¼ˆread-only + alertï¼‰
- `openclaw-upgrade-sop.md`ï¼šäººé¡æ“ä½œæ‰‹å†Š

<ClawdNote>
å››ä»¶çµ„æœ€è®šçš„åœ°æ–¹ä¸æ˜¯ã€ŒåŠŸèƒ½å¤šã€ï¼Œæ˜¯ trust boundary å¾ˆä¹¾æ·¨ã€‚è¨ºæ–·å·¥å…·ä¸è©²æœ‰ç ´å£æ¬Šé™ï¼›ç›£çœ‹å·¥å…·ä¸è©²å·å· rollbackï¼›è¦å‹•åˆ€å°±æ˜ç¢ºé€² rollbackã€‚é€™å°±æ˜¯ engineering disciplineã€‚
</ClawdNote>

<LevelUpQuiz
  question="Health Suite ç‚ºä»€éº¼åˆ»æ„æ‹†æˆå››å€‹å·¥å…·ï¼Œè€Œä¸æ˜¯ one mega scriptï¼Ÿ"
  options={[
    { label: "A", text: "å› ç‚º bash ä¸èƒ½å¯«è¶…é 500 è¡Œ" },
    { label: "B", text: "å› ç‚ºæ‹†é–‹æ¯”è¼ƒæ½®" },
    { label: "C", text: "å› ç‚ºè¦æŠŠè¨ºæ–·ã€ç ´å£ã€ç›£çœ‹ã€äººé¡æµç¨‹çš„æ¬Šè²¬èˆ‡é¢¨éšªé‚Šç•Œåˆ‡æ¸…æ¥š" },
    { label: "D", text: "å› ç‚º systemd åªèƒ½è·‘å››å€‹æœå‹™" },
  ]}
  answer="C"
  explanation="Separation of concerns çš„æ ¸å¿ƒæ˜¯æ¬Šé™å’Œè²¬ä»»åˆ†é›¢ã€‚é€™æ¨£æ‰ä¸æœƒè®“ watchdog ç„¡æ„é–“æ‹¿åˆ° rollback çš„ç ´å£æ¬Šã€‚"
/>

---

## ğŸ° Floor 3ï¼šHealthcheck æ·±æ½›ï¼ˆ1301 è¡Œçš„å¥æª¢å¼•æ“ï¼‰

<LevelUpProgress current={3} total={10} title="OpenClaw Health Suite" />

`openclaw-healthcheck.sh` æ˜¯ä¸»è»¸ï¼Œç´„ 1301 è¡Œã€‚

**å®ƒåšäº† 38 å€‹æª¢æŸ¥ï¼Œåˆ† 7 é¡ï¼š**

- `SVC`ï¼šservice/systemd å¥åº·
- `AUTH`ï¼štoken / OAuth / profile fingerprint
- `CHAN`ï¼šTelegram / Discord é€£ç·šèƒ½åŠ›
- `MDL`ï¼šprimary/fallback model è¨­å®š
- `CFG`ï¼šè¨­å®šæª”å®Œæ•´æ€§èˆ‡å¯è§£ææ€§
- `SES`ï¼šsession æª”æ¡ˆå¥åº·ç‹€æ…‹
- `HK`ï¼šhooks æ˜¯å¦å­˜åœ¨èˆ‡å¯åŸ·è¡Œ

å¸¸ç”¨å‘½ä»¤çµ„ï¼š

```bash
openclaw-healthcheck.sh verify
openclaw-healthcheck.sh verify --quick
openclaw-healthcheck.sh snapshot
openclaw-healthcheck.sh diff <snapshot1> <snapshot2>
openclaw-healthcheck.sh pre-update
openclaw-healthcheck.sh post-update
```

**Strictness mode ä¸‰æ®µå¼ï¼š**

- `balanced`ï¼ˆé è¨­ï¼‰ï¼šæ—¥å¸¸ç›£çœ‹
- `strict`ï¼šä¸Š production gate å‰ç”¨
- `lenient`ï¼šå·²çŸ¥ degradedã€å…ˆä¿ç•™è§€å¯Ÿ

åŒä¸€æ¢è¦å‰‡åœ¨ä¸åŒ mode æœƒè¢«å‡é™ç´šã€‚ä¾‹å¦‚ missing fallback modelï¼š

- balanced = warning
- strict = critical
- lenient = info

**å®‰å…¨ç´°ç¯€å¾ˆé—œéµï¼šfingerprint ä¸å­˜ raw secret**

```json
{
  "auth_profiles": {
    "anthropic:cth.work": {
      "type": "token",
      "fingerprint": "sk-a...oat1",
      "present": true
    }
  }
}
```

ä½ åªçœ‹å¾—å‡ºã€Œæœ‰æ²’æœ‰æ› keyã€ï¼Œçœ‹ä¸åˆ° key æœ¬é«”ã€‚é€™å€‹è¨­è¨ˆè¶…å¯¦ç”¨ã€‚

**pre-update æœƒé †ä¾¿æ‰“ rollback packageï¼š**

```text
~/.openclaw/health-snapshots/rollback-<timestamp>/
  â”œâ”€â”€ openclaw.json
  â”œâ”€â”€ auth-profiles.json
  â”œâ”€â”€ openclaw-gateway.service
  â”œâ”€â”€ drop-ins/
  â””â”€â”€ manifest.json (æ¯å€‹æª”æ¡ˆçš„ SHA256)
```

**JSON-first è¼¸å‡º**æ˜¯å¦ä¸€å€‹äº®é»ï¼š

```bash
openclaw-healthcheck.sh verify --json
```

çµ¦æ©Ÿå™¨ parseï¼›é è¨­å½©è‰²æ–‡å­—çµ¦äººçœ‹ã€‚é›™ä»‹é¢ï¼Œä¸äº’æ’ã€‚

<LevelUpQuiz
  question="Snapshot è£¡ç‚ºä»€éº¼å­˜ fingerprintï¼ˆfirst4...last4ï¼‰è€Œä¸æ˜¯å®Œæ•´ API keyï¼Ÿ"
  options={[
    { label: "A", text: "å› ç‚º bash ä¸èƒ½è™•ç†é•·å­—ä¸²" },
    { label: "B", text: "å› ç‚ºå®Œæ•´ key å¤ªä½”ç©ºé–“" },
    { label: "C", text: "å› ç‚ºè¦åŒæ™‚æ»¿è¶³ã€å¯æ¯”å°è®Šæ›´ã€èˆ‡ã€ä¸æ´©æ¼å¯†é‘°ã€" },
    { label: "D", text: "å› ç‚º Telegram ä¸æ”¯æ´å®Œæ•´ key" },
  ]}
  answer="C"
  explanation="Fingerprint èƒ½å›ç­”ã€æœ‰æ²’æœ‰æ”¹è®Šã€ï¼Œä½†ä¸æš´éœ² secret æœ¬é«”ï¼Œç¬¦åˆæœ€å°æ´©æ¼åŸå‰‡ï¼ˆdefense in depthï¼‰ã€‚"
/>

---

## ğŸ° Floor 4ï¼šRollback æ·±æ½›ï¼ˆ378 è¡Œçš„ç·Šæ€¥æ‰‹è¡“ï¼‰

<LevelUpProgress current={4} total={10} title="OpenClaw Health Suite" />

`openclaw-rollback.sh` æ˜¯ emergency surgeryã€‚

å…ˆè¨˜ä¸‰å€‹æŒ‡ä»¤ï¼š

```bash
openclaw-rollback.sh --dry-run
openclaw-rollback.sh --confirm
openclaw-rollback.sh --auto-confirm
```

é è¨­ä¸å¸¶åƒæ•¸ = dry-runã€‚é€™æ˜¯æ•…æ„çš„ï¼Œä¸æ˜¯å·æ‡¶ã€‚

**åŸ·è¡Œæµç¨‹ï¼š**

- æ‰¾æœ€æ–° rollback package
- é©—è­‰ `manifest.json` SHA256
- åˆ¤æ–· service modeï¼ˆuser systemd / system systemd / manual nohup / dualï¼‰
- `pkill -f` æ¸…æ‰æ‰€æœ‰ gateway processï¼ˆå« rogue nohupï¼‰
- é‚„åŸ config/auth/service/drop-ins
- ä¾åµæ¸¬åˆ°çš„ mode é‡å•Ÿ
- è·‘ post-rollback healthcheck é©—è­‰

é€™è£¡æœ€å¯¦æˆ°çš„é»æ˜¯ service mode detectionã€‚äº‹æ•…æ™‚çœŸå¯¦ç‹€æ³æ˜¯ã€Œæœ‰æ™‚ systemdã€æœ‰æ™‚ nohupã€æœ‰æ™‚å…©å€‹éƒ½åœ¨è·‘ã€ã€‚ä¸å…ˆè¾¨è­˜ modeï¼Œrollback å¾ˆå®¹æ˜“ restore æˆåŠŸä½†æ²’å•Ÿå‹•ï¼Œæˆ–å•Ÿå‹•åˆ°éŒ¯èª¤ targetã€‚

<AnalogyBox title="ğŸ¥ æ€¥è¨ºå®¤é¡æ¯”">

ä½ é€é†«æ™‚ï¼Œé†«ç”Ÿç¬¬ä¸€ä»¶äº‹ä¸æ˜¯ç›´æ¥é–‹åˆ€ï¼Œè€Œæ˜¯å…ˆåˆ¤æ–·ä½ åœ¨å“ªå€‹ç§‘ã€å“ªç¨®ç‹€æ…‹ã€å…ˆåšå“ªä¸€æ­¥é¢¨éšªæœ€ä½ã€‚Rollback ä¹Ÿæ˜¯ä¸€æ¨£ï¼šå…ˆç¢ºèªç¾å ´ç‹€æ…‹ï¼Œå†å‹•åˆ€ï¼Œä¸ç„¶æ•‘æ´æœ¬èº«æœƒè£½é€ ç¬¬äºŒæ¬¡äº‹æ•…ã€‚

</AnalogyBox>

<LevelUpQuiz
  question="Rollback ç‚ºä»€éº¼ä¸€å®šè¦ default dry-runï¼Ÿ"
  options={[
    { label: "A", text: "å› ç‚ºä½œè€…ä¸æ•¢çœŸçš„é‚„åŸ" },
    { label: "B", text: "å› ç‚º rollback å¾ˆæ…¢" },
    { label: "C", text: "å› ç‚ºé˜²æ­¢æ‰‹æ»‘èª¤æ“ä½œï¼Œå…ˆçœ‹ã€å°‡æœƒç™¼ç”Ÿä»€éº¼ã€å†ç¢ºèªåŸ·è¡Œ" },
    { label: "D", text: "å› ç‚º systemd ä¸å…è¨±ç›´æ¥é‚„åŸ" },
  ]}
  answer="C"
  explanation="Rollback æ˜¯ destructive æ“ä½œï¼Œdry-run é è¨­èƒ½å¤§å¹…é™ä½æ“ä½œå¤±èª¤é¢¨éšªï¼Œä¹Ÿæ›´åˆ©æ–¼å¯©æ ¸èˆ‡å”ä½œã€‚"
/>

---

## ğŸ° Floor 5ï¼šWatchdog æ·±æ½›ï¼ˆ3 åˆ†é˜å·¡é‚ä¸€æ¬¡ï¼‰

<LevelUpProgress current={5} total={10} title="OpenClaw Health Suite" />

`openclaw-watchdog.sh` ç´„ 205 è¡Œï¼Œè·‘åœ¨ systemd timerï¼Œæ¯ 3 åˆ†é˜ä¸€æ¬¡ã€‚

```text
timer tick (3 min)
  -> watchdog
    -> healthcheck verify --quick --json
    -> parse JSON
    -> unhealthy? ç´¯åŠ  consecutive_failures
    -> é€£çºŒ >=3 æ¬¡ or æŒçºŒ unhealthy >=5 åˆ†é˜
         -> é€ Telegram alert + rollback å»ºè­°
       else
         -> è¨˜éŒ„ã€ç­‰å¾…ä¸‹è¼ª
    -> healthy
         -> æ­¸é›¶å¤±æ•—è¨ˆæ•¸
```

å®ƒæœ‰è‡ªå·±çš„ state fileï¼Œå¤§æ¦‚åƒé€™æ¨£ï¼š

```json
{
  "run_count": 42,
  "consecutive_failures": 0,
  "last_healthy": "2026-02-22T10:30:00Z",
  "last_alert_sent": "2026-02-21T04:15:00Z",
  "alert_cooldown_until": "2026-02-21T04:30:00Z"
}
```

è¨­è¨ˆé‡é»ï¼š

- alert cooldown é è¨­ 15 åˆ†é˜ï¼Œé¿å…é€šçŸ¥è½Ÿç‚¸
- escalation æ¢ä»¶é›™è»Œï¼ˆæ¬¡æ•¸ or æ™‚é•·ï¼‰
- æ”¯æ´ `OPENCLAW_WATCHDOG_SSH_TARGET`ï¼Œä¸ç¶æ­» IP
- æ”¯æ´ `OPENCLAW_WATCHDOG_TEST_MODE=1`ï¼Œæ‰‹å‹•æ¸¬è©¦æ™‚è¨Šæ¯æœƒåŠ  `[manual testing-no worry]`

<ClawdNote variant="murmur">
å¾ˆå¤šç›£æ§ç³»çµ±å¤±æ•—ä¸æ˜¯ã€Œåµæ¸¬ä¸åˆ°ã€ï¼Œè€Œæ˜¯ã€Œåµæ¸¬åˆ°å¤ªå¤šã€ã€‚alert fatigue ä¸€ä¾†ï¼ŒçœŸäº‹æ•…ä¹Ÿæœƒè¢«ç•¶é›œè¨Šã€‚é€™ç‰ˆ cooldown è¨­è¨ˆæœ‰æŠ“åˆ°é‚£å€‹å¹³è¡¡é»ã€‚
</ClawdNote>

<LevelUpQuiz
  question="Watchdog ä½•æ™‚æœƒå‡ç´šæˆä¸»å‹•å‘Šè­¦ï¼ˆå« rollback suggestionï¼‰ï¼Ÿ"
  options={[
    { label: "A", text: "åªè¦ä»»ä¸€æª¢æŸ¥ warning" },
    { label: "B", text: "åªè¦è·‘æ»¿ 3 åˆ†é˜" },
    { label: "C", text: "é€£çºŒå¤±æ•— >=3 æ¬¡ï¼Œæˆ– unhealthy æŒçºŒ >=5 åˆ†é˜" },
    { label: "D", text: "æ¯æ¬¡ timer éƒ½æœƒå‘Šè­¦" },
  ]}
  answer="C"
  explanation="é€™å€‹é›™æ¢ä»¶è®“ watchdog æ—¢ä¸éåº¦æ•æ„Ÿï¼Œä¹Ÿä¸æœƒæ¼æ‰æ…¢æ€§æ•…éšœã€‚"
/>

---

## ğŸ° Floor 6ï¼šUpgrade SOPï¼ˆäººé¡æ‰æ˜¯æœ€å¾Œä¿éšªçµ²ï¼‰

<LevelUpProgress current={6} total={10} title="OpenClaw Health Suite" />

ç¬¬å››ä»¶å·¥å…·ä¸æ˜¯ scriptï¼Œæ˜¯ `openclaw-upgrade-sop.md`ã€‚

é€™å¾ˆé‡è¦ï¼š**æœ€å±éšªçš„æ“ä½œï¼ˆå‡ç´šï¼‰ä¸èƒ½åªé ç›´è¦ºï¼Œå¿…é ˆæœ‰æµç¨‹ã€‚**

SOP ä¸»å¹¹ï¼š

1. åœ watchdog timer
2. è·‘ `pre-update`ï¼ˆå¿«ç…§ + rollback packageï¼‰
3. å‡ç´š OpenClaw
4. **é—œéµé–˜é–€ï¼šç¢ºèª `OPENCLAW_NO_RESPAWN=1` å·²å­˜åœ¨**
5. daemon-reload + restart service
6. è·‘ `post-update`
7. å•Ÿå› watchdog
8. è§€å¯Ÿ 5 åˆ†é˜ quick verify

é—œæ–¼äº‹æ•…æ ¸å¿ƒæ•™è¨“ï¼ŒSOP æœ‰æ˜å¯« decision treeï¼š

- å¦‚æœçœ‹åˆ° `pairing required` / `scope-upgrade`
  - å…ˆåš `openclaw onboard`ï¼ˆé‡é…å°ï¼‰
  - ä¸è¦ç¬¬ä¸€æ™‚é–“ rollback
- å¦‚æœ critical fail æŒçºŒä¸è§£
  - æ‰é€² `openclaw-rollback.sh --confirm`

<ClawdNote>
é€™ä»½ SOP çš„åƒ¹å€¼ä¸æ˜¯ã€Œè®“é«˜æ‰‹æ›´å¼·ã€ï¼Œè€Œæ˜¯è®“ç–²å‹ç‹€æ…‹ä¸‹çš„äººä¹Ÿä¸æœƒåšå‡ºé«˜é¢¨éšªéŒ¯èª¤æ±ºç­–ã€‚å‡Œæ™¨ 3 é»æœ€éœ€è¦é€™ç¨®æ–‡ä»¶ã€‚
</ClawdNote>

<LevelUpQuiz
  question="å‡ç´šå¾Œé‡åˆ° `pairing required`ï¼ŒSOP å»ºè­°ç¬¬ä¸€æ­¥æ˜¯ï¼Ÿ"
  options={[
    { label: "A", text: "ç«‹åˆ» rollback" },
    { label: "B", text: "å…ˆè·‘ openclaw onboard é‡æ–° pairingï¼Œå†é‡è·‘ post-update" },
    { label: "C", text: "å…ˆåˆªé™¤æ‰€æœ‰ session" },
    { label: "D", text: "å…ˆé‡é–‹æ©Ÿ VM" },
  ]}
  answer="B"
  explanation="é€™é¡éŒ¯èª¤å¯èƒ½æ˜¯ auth å‡ç´šéœ€æ±‚ï¼Œä¸ä¸€å®šæ˜¯ç³»çµ±æ¯€æã€‚å…ˆé‡æ–° pairingï¼Œå¤±æ•—å†èµ° rollbackã€‚"
/>

---

## ğŸ° Floor 7ï¼šReview Dramaï¼ˆçœŸæ­£çš„æŠ€è¡“é«˜æ½®ï¼‰

<LevelUpProgress current={7} total={10} title="OpenClaw Health Suite" />

é€™æ¡ˆå­æœ€ç²¾å½©çš„ä¸æ˜¯ code é‡ï¼Œæ˜¯ review éç¨‹ã€‚

**è§’è‰²åˆ†å·¥ï¼š**

- Userï¼ˆSprinï¼‰ï¼šå®šæ–¹å‘ã€æ‹æ¿ go/no-go
- CCï¼ˆClaude Codeï¼‰ï¼šæ¶æ§‹è¨­è¨ˆ + code review
- Codexï¼šå¯¦ä½œå…­å€‹æª”æ¡ˆ + VM æ¸¬è©¦
- Clawdï¼šå‰ 3 è¼ªè¨­è¨ˆå…±åŒè¨è«–

ç¬¬ä¸€è¼ª reviewï¼ŒCC æŠ“å‡º 14 å€‹å•é¡Œï¼š

- 1 å€‹ CRITICAL
- 3 å€‹ HIGH
- 6 å€‹ MEDIUM
- 4 å€‹ LOW

å…¶ä¸­ CRITICAL æ˜¯ç¶“å…¸ bash é™·é˜±ï¼š`|| true` åƒæ‰ exit codeã€‚

```bash
set -euo pipefail
verify_json="$(openclaw-healthcheck.sh verify --quick --json || true)"
rc=$?
# rc æ°¸é æ˜¯ 0ï¼Œå› ç‚ºæŠ“åˆ°çš„æ˜¯ true çš„ exit code
```

çµæœå°±æ˜¯ watchdog æ°¸é è¦ºå¾—å¥åº·ï¼Œç­‰æ–¼å®‰å…¨ç¶²é–‹äº†æ´ã€‚

ä¿®æ³•ä¸æ˜¯ç¡¬æŠ“ `$?`ï¼Œè€Œæ˜¯ç›´æ¥ parse JSON ç‹€æ…‹ï¼š

```bash
verify_json="$(openclaw-healthcheck.sh verify --quick --json || true)"
failed_critical=$(echo "$verify_json" | jq -r '.failed_critical // 0')

if [[ "$failed_critical" -gt 0 ]]; then
  handle_failure "$verify_json"
fi
```

ä½†æ•…äº‹é‚„æ²’å®Œã€‚Codex ä¸¦æ²’æœ‰ç›²æ”¶å…¨éƒ¨ reviewï¼Œè€Œæ˜¯å° 3 æ¢æå‡ºåé§ï¼ŒæŒ‡å‡º reviewer ç”¨çš„æ˜¯èˆŠç‰ˆè¦æ ¼ï¼ˆv2/v3ï¼‰ï¼Œä¸æ˜¯æœ€çµ‚ v4ã€‚å¾Œä¾† CC ä¹Ÿç¢ºèªé€™ 3 æ¢ pushback å…¨éƒ¨æˆç«‹ã€‚

é€™æ®µè¶…å€¼å¾—è¨˜ï¼š**reviewer å¯ä»¥æŠ“åˆ°è‡´å‘½ bugï¼Œä¹Ÿå¯ä»¥çœ‹éŒ¯è¦æ ¼ç‰ˆæœ¬ã€‚implementer å¯ä»¥çŠ¯éŒ¯ï¼Œä¹Ÿå¯ä»¥ç³¾æ­£ reviewerã€‚**

é€™å°±æ˜¯ multi-agent çœŸæ­£åƒ¹å€¼ï¼šäº’ç›¸æ ¡æ­£ï¼Œä¸è¿·ä¿¡å–®ä¸€æ¬Šå¨ã€‚

<LevelUpQuiz
  question="é€™æ®µ review drama æœ€é‡è¦çš„å·¥ç¨‹ lesson æ˜¯ï¼Ÿ"
  options={[
    { label: "A", text: "Reviewer ä¸€å®šæ¯” implementer æº–" },
    { label: "B", text: "Implementer æ‡‰è©²ç„¡æ¢ä»¶æ¥å—æ‰€æœ‰ review" },
    { label: "C", text: "å¤šä»£ç†å”ä½œçš„é—œéµæ˜¯å¯é©—è­‰ã€å¯åé§ã€ä»¥æœ€æ–°ç‰ˆè¦æ ¼ç‚ºæº–" },
    { label: "D", text: "åªè¦æœ‰ AIï¼Œå°±ä¸éœ€è¦ code review" },
  ]}
  answer="C"
  explanation="é€™æ¬¡æ¡ˆä¾‹åŒæ™‚å‡ºç¾ã€reviewer æŠ“åˆ° showstopperã€èˆ‡ã€implementer ç³¾æ­£ reviewerã€ã€‚å¥åº·å”ä½œä¸æ˜¯æœå¾ï¼Œè€Œæ˜¯åŸºæ–¼è­‰æ“šäº’ç›¸é©—è­‰ã€‚"
/>

---

## ğŸ° Floor 8ï¼š5 å€‹å€¼å¾—æŠ„ä½œæ¥­çš„è¨­è¨ˆæ±ºç­–

<LevelUpProgress current={8} total={10} title="OpenClaw Health Suite" />

æŠŠç´°ç¯€æŠ½æˆå¯è¤‡ç”¨åŸå‰‡ï¼Œçµ¦ä½ ä¹‹å¾Œåšä»»ä½• ops tooling åƒè€ƒã€‚

**1) JSON-firstï¼Œhuman-friendly second**

- æ©Ÿå™¨åƒ `--json`
- äººé¡çœ‹å½©è‰²æ–‡å­—
- ä¸€ä»½é‚è¼¯ï¼Œå…©ç¨®ä»‹é¢

**2) Fingerprint-not-rawï¼ˆæœ€å°æ´©æ¼ï¼‰**

- å­˜ `sk-a...oat1`
- ä¸å­˜å®Œæ•´ secret
- é‚„æ˜¯èƒ½è¿½è¹¤ token rotate

**3) Destructive tool default dry-run**

- ä¸åŠ  `--confirm` ä¸å‹•åˆ€
- é˜²æ‰‹æ»‘ã€é˜²ç–²å‹èª¤æ“ä½œ

**4) Separation of concerns**

- healthcheck æ°¸é  read-only
- watchdog åªç›£çœ‹ä¸å‹•åˆ€
- rollback åªåœ¨æ˜ç¢ºç¢ºèªæ™‚åŸ·è¡Œ

**5) restart_delta çš„èªæ„æ¨™ç±¤**

- quick mode / full mode é‡æ¸¬æ–¹æ³•ä¸åŒ
- åœ¨ JSON è£¡æ¨™æ˜ `mode`
- diff æ‰ä¸æœƒèª¤å ±ã€Œæ•¸å­—è®Šå°äº†æ˜¯ä¸æ˜¯å£æ‰ã€

<AnalogyBox title="ğŸ›¡ï¸ å®‰å…¨å¸¶ + æ°£å›Š + ABS">

å–®ä¸€é˜²è­·æ©Ÿåˆ¶ç¸½æœƒæ¼ã€‚çœŸæ­£å¯é çš„ç³»çµ±æ˜¯å¤šå±¤é˜²è­·ï¼š

- Testingï¼ˆLv-07ï¼‰åƒå®‰å…¨å¸¶
- Health Suiteï¼ˆLv-08ï¼‰åƒæ°£å›Š + ABS
- äººé¡ SOP åƒé§•è¨“ç­è¦å‰‡

ä½ ä¸æ˜¯åœ¨è¿½æ±‚ã€Œæ°¸ä¸å‡ºäº‹ã€ï¼Œè€Œæ˜¯åœ¨è¿½æ±‚ã€Œå‡ºäº‹ä¹Ÿä¸è‡´å‘½ã€ã€‚

</AnalogyBox>

<LevelUpQuiz
  question="`restart_delta` ç‚ºä»€éº¼è¦é™„ä¸Š modeï¼ˆquick/fullï¼‰èªæ„æ¨™ç±¤ï¼Ÿ"
  options={[
    { label: "A", text: "å› ç‚º JSON æª”æ¡ˆæ¯”è¼ƒå¥½çœ‹" },
    { label: "B", text: "å› ç‚º quick/full æ¡æ¨£æ–¹æ³•ä¸åŒï¼Œæ²’æœ‰èªæ„æ¨™ç±¤æœƒé€ æˆè·¨æ¨¡å¼èª¤æ¯”è¼ƒ" },
    { label: "C", text: "å› ç‚º jq åªèƒ½è®€ mode" },
    { label: "D", text: "å› ç‚º systemd è¦æ±‚" },
  ]}
  answer="B"
  explanation="åŒæ¨£æ˜¯ restart_deltaï¼Œä¸åŒæ¨¡å¼çš„è¨ˆç®—ä¾†æºä¸åŒã€‚æ¨™è¨»èªæ„èƒ½é¿å… diff åšå‡ºéŒ¯èª¤æ¨è«–ã€‚"
/>

---

## ğŸ° Floor 9ï¼šå¦‚æœç•¶æ™‚æœ‰ Health Suiteï¼Œä¸–ç•Œç·šæœƒæ€éº¼æ”¹å¯«

<LevelUpProgress current={9} total={10} title="OpenClaw Health Suite" />

ä¾†åšäº‹æ•… replayã€‚

å¦‚æœ 2026-02-20 ç•¶å¤©å·²ç¶“éƒ¨ç½² Health Suiteï¼Œåˆç†æµç¨‹æœƒæ˜¯ï¼š

- pre-update å…ˆç”¢å‡º snapshot + rollback package
- å‡ç´šå¾Œå…ˆé `OPENCLAW_NO_RESPAWN=1` é—œå¡ï¼Œä¹é ­è›‡ç›´æ¥è¢«å°å°
- post-update å¹¾ç§’å…§æŠ“åˆ° `pairing required`
- ä¾ SOP å…ˆè·‘ onboardï¼Œå†åˆ¤æ–·æ˜¯å¦ rollback
- è‹¥ä»ç•°å¸¸ï¼Œwatchdog æœ€æ…¢ 3 åˆ†é˜å…§ç™¼ alert
- rollback ä¸‰åˆ†é˜ç´šæ¢å¾©åˆ° known-good

**é ä¼° downtimeï¼šå¾ 36 å°æ™‚é™åˆ° < 10 åˆ†é˜ã€‚**

ç›®å‰é€™å¥—å·²å®Œæˆå¯¦ä½œèˆ‡ review closureï¼Œå°æ‡‰ 3 å€‹ commitï¼š

- `da4b72a`ï¼šåˆç‰ˆå…­æª”æ¡ˆ
- `044c33a`ï¼špriority fixesï¼ˆå« showstopperï¼‰
- `608d8b2`ï¼šwatchdog test mode alert prefix

ä¸‹ä¸€æ­¥æ˜¯ production deploy + drillï¼ˆå‡ç´šæ¼”ç·´ã€å›æ»¾æ¼”ç·´ã€æ•…éšœæ³¨å…¥ + 72h è§€å¯Ÿï¼‰ã€‚

<ClawdNote variant="murmur">
Lv-07 æ•™ä½ ã€Œä¸è¦æŠŠå£ code æ”¾é€²å»ã€ã€‚Lv-08 æ•™ä½ ã€Œå£äº‹é‚„æ˜¯ç™¼ç”Ÿæ™‚ï¼Œæ€éº¼è®“è‡ªå·±æ´»è‘—ã€ã€‚é€™å…©ç¯‡åˆèµ·ä¾†ï¼Œæ‰å« production readinessã€‚
</ClawdNote>

**ä¸€å¥è©±ç¸½çµï¼š**

> æ¸¬è©¦è®“ä½ å°‘çŠ¯éŒ¯ï¼ŒHealth Suite è®“ä½ çŠ¯éŒ¯ä¹Ÿä¸æœƒæ­»ã€‚

---

## ç³»åˆ—é€²åº¦å›é¡§ï¼ˆLv-04 ~ Lv-08ï¼‰

- **Lv-04 Gateway æ ¸å¿ƒ**ï¼šOpenClaw çš„ä¸­æ¨æ¶æ§‹ã€WebSocket RPCã€Sessionã€Auth
- **Lv-05 Channels & Tools**ï¼šå¤šå¹³å°è¨Šæ¯æŠ½è±¡ã€command routingã€tool å‘¼å«
- **Lv-06 Memory & Automation**ï¼šè¨˜æ†¶ç³»çµ±ã€skillsã€cronã€è‡ªå‹•åŒ–æ€ç¶­
- **Lv-07 Testing**ï¼šAI æ™‚ä»£ test = è¦æ ¼æ›¸ï¼Œä¸‰å±¤æ¸¬è©¦é‡‘å­—å¡”
- **Lv-08 Health Suiteï¼ˆæœ¬ç¯‡ï¼‰**ï¼šhealthcheck + watchdog + rollback + SOP çš„å››å±¤é˜²ç·š

ä¸‹ä¸€é—œæœƒå¾€ã€Œæ¼”ç·´èˆ‡é‹ç¶­å¯¦æˆ°ã€èµ°ï¼šä¸åªå¯«å·¥å…·ï¼Œè€Œæ˜¯æŠŠå·¥å…·è®Šæˆå¯ä»¥ä¿¡ä»»çš„ routineã€‚

å®Œã€‚
