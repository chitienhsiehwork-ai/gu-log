---
ticketId: "Lv-05"
title: "OpenClaw Channels & Toolsï¼šAI çš„å˜´å·´å’Œæ‰‹"
originalDate: "2026-02-18"
source: "Level-Up ç³»åˆ—"
sourceUrl: "https://gu-log.vercel.app/posts/levelup-20260218-05-openclaw-channels-tools"
summary: "æ‹†è§£ OpenClaw æ€éº¼æ¥ Telegramã€Discord ç­‰å¤šå¹³å°ï¼Œä»¥åŠ AI æ€éº¼åŸ·è¡ŒæŒ‡ä»¤ã€æ“ä½œç€è¦½å™¨ã€ç®¡ç†å®‰å…¨ã€‚Python äººçœ‹å¾—æ‡‚çš„ TypeScript æ¶æ§‹å°è¦½ã€‚"
lang: "zh-tw"
tags: ["openclaw", "channels", "tools", "telegram", "security", "tutorial", "level-up"]
---

import LevelUpProgress from '../../components/LevelUpProgress.astro';
import LevelUpQuiz from '../../components/LevelUpQuiz.astro';
import ClawdNote from '../../components/ClawdNote.astro';
import AnalogyBox from '../../components/AnalogyBox.astro';

æ­¡è¿ä¾†åˆ° Level-Up ç³»åˆ—ç¬¬äº”ç¯‡ã€‚

ä¸Šä¸€ç¯‡æˆ‘å€‘æŠŠ OpenClaw Gateway æ‹†äº†å€‹é€å¾¹ â€”â€” Hub-and-spoke æ¶æ§‹ã€WebSocket RPCã€Session ç®¡ç†ã€Config ç³»çµ±ã€‚ä½ ç¾åœ¨çŸ¥é“ Gateway æ˜¯é‚£å€‹ã€Œé ˜ç­ã€äº†ã€‚

ä½†é ˜ç­å†å²å®³ï¼Œæ²’æœ‰è€³æœµè½å®¢äººé»é¤ã€æ²’æœ‰æ‰‹å»åšèœï¼Œä¹Ÿæ˜¯ç™½æ­ã€‚

ä»Šå¤©è¦æ‹†çš„æ˜¯ï¼š**Channels**ï¼ˆAI çš„å˜´å·´å’Œè€³æœµï¼‰è·Ÿ **Tools**ï¼ˆAI çš„é›™æ‰‹ï¼‰ã€‚æº–å‚™å¥½å°±ä¸Šæ¨“ ğŸ—¡ï¸

---

## ğŸ° Floor 0ï¼šChannel æ¶æ§‹é³¥ç°

<LevelUpProgress current={0} total={10} title="Channels & Tools" />

ä¸Šä¸€ç¯‡è¬›éï¼ŒGateway æ˜¯ Hub-and-spoke çš„ä¸­å¿ƒã€‚é‚£äº› spoke è£¡é¢ï¼Œæœ€é‡è¦çš„ä¸€é¡å°±æ˜¯ **Channel**ã€‚

> **Channel = OpenClaw è·Ÿå¤–éƒ¨é€šè¨Šå¹³å°ä¹‹é–“çš„æ©‹æ¨‘ã€‚**

ä½ åœ¨ Telegram æ‰“å­— â†’ Channel æ”¶åˆ° â†’ ç¿»æˆ OpenClaw å…§éƒ¨æ ¼å¼ â†’ ä¸Ÿçµ¦ Gatewayã€‚Gateway å›è¦† â†’ Channel ç¿»å› Telegram æ ¼å¼ â†’ é€å‡ºå»ã€‚

<AnalogyBox title="ğŸŒ è¯åˆåœ‹ç¿»è­¯å®˜">

æƒ³åƒ OpenClaw æ˜¯è¯åˆåœ‹ç§˜æ›¸é•·ï¼Œæ¯å€‹ channel æ˜¯ä¸€å€‹ç¿»è­¯å®˜ï¼š

- **Telegram ç¿»è­¯å®˜**ï¼šè½å¾—æ‡‚ä¿„æ–‡ï¼ˆTelegram APIï¼‰ï¼Œç¿»æˆè‹±æ–‡ï¼ˆOpenClaw å…§éƒ¨æ ¼å¼ï¼‰
- **Discord ç¿»è­¯å®˜**ï¼šè½å¾—æ‡‚æ³•æ–‡ï¼ˆDiscord Gateway APIï¼‰ï¼Œä¹Ÿç¿»æˆè‹±æ–‡
- **Slack ç¿»è­¯å®˜**ï¼šè½å¾—æ‡‚å¾·æ–‡ï¼ˆSlack Events APIï¼‰ï¼Œé‚„æ˜¯ç¿»æˆè‹±æ–‡

ç§˜æ›¸é•·åªéœ€è¦è½è‹±æ–‡å°±å¥½ã€‚æƒ³æ¥æ–°èªè¨€ï¼Ÿå†é›‡ä¸€å€‹ç¿»è­¯å®˜ï¼ˆè£æ–° pluginï¼‰ã€‚

</AnalogyBox>

**å…§å»º channelï¼ˆ9 å€‹ï¼‰**

- Telegram
- Discord
- Slack
- Signal
- WhatsApp
- Google Chat
- iMessage
- WebChat
- IRC

**ç¤¾ç¾¤ extensionï¼ˆ6+ å€‹ï¼‰**ï¼šMatrixã€Microsoft Teamsã€Zaloã€Feishuï¼ˆé£›æ›¸ï¼‰ã€Mattermostã€Nextcloud Talk

æ¯å€‹ channel æ˜¯ä¸€å€‹ **plugin**ï¼Œimplement çµ±ä¸€çš„ä»‹é¢ã€‚è¦åŠ æ–°å¹³å°ï¼Ÿå¯«ä¸€å€‹æ–° plugin å°±å¥½ï¼ŒGateway ä¸ç”¨æ”¹ã€‚

<ClawdNote variant="murmur">
9 å€‹å…§å»º + 6 å€‹ extension = 15 å€‹é€šè¨Šå¹³å°ã€‚ä½ èªè­˜çš„ã€ä¸èªè­˜çš„ï¼Œå…¨éƒ¨éƒ½æœ‰ã€‚æˆ‘è‡ªå·±ä½åœ¨ Telegram è£¡ï¼Œä½†å¶çˆ¾è½åˆ°éš”å£ Discord ç¿»è­¯å®˜åœ¨æŠ±æ€¨ rate limitã€‚
</ClawdNote>

<LevelUpQuiz
  question="Channel åœ¨ OpenClaw æ¶æ§‹ä¸­æ‰®æ¼”ä»€éº¼è§’è‰²ï¼Ÿ"
  options={[
    { label: "A", text: "è² è²¬æ€è€ƒå’Œå›è¦†" },
    { label: "B", text: "è² è²¬åœ¨å¤–éƒ¨é€šè¨Šå¹³å°å’Œ Gateway ä¹‹é–“åšæ ¼å¼è½‰æ›" },
    { label: "C", text: "è² è²¬å­˜æ”¾å°è©±æ­·å²" },
    { label: "D", text: "è² è²¬å‘¼å« LLM API" },
  ]}
  answer="B"
  explanation="Channel æ˜¯ç¿»è­¯å®˜ï¼ŒæŠŠå„å¹³å°çš„æ ¼å¼ç¿»æˆ OpenClaw å…§éƒ¨æ ¼å¼ï¼ˆinboundï¼‰ï¼Œæˆ–æŠŠ OpenClaw çš„å›è¦†ç¿»å›å¹³å°æ ¼å¼ï¼ˆoutboundï¼‰ã€‚æ€è€ƒæ˜¯ Agent çš„äº‹ï¼Œå­˜æ­·å²æ˜¯ Session çš„äº‹ã€‚"
/>

---

## ğŸ° Floor 1ï¼šPlugin SDK â€” Channel æ˜¯æ€éº¼å¯«å‡ºä¾†çš„

<LevelUpProgress current={1} total={10} title="Channels & Tools" />

æ¯å€‹ channel plugin éƒ½è¦ implement ä¸€çµ„æ¨™æº–ä»‹é¢ã€‚OpenClaw æä¾›äº† **Plugin SDK**ï¼ˆåœ¨ `dist/plugin-sdk/` è£¡ï¼‰ï¼Œè®“ä½ ä¸ç”¨å¾é›¶é–‹å§‹ã€‚

**å…©å€‹æ–¹å‘çš„è³‡æ–™æµ**

- **Inbound**ï¼šä½¿ç”¨è€…ç™¼è¨Šæ¯ â†’ platform API æ¨é€åˆ° plugin â†’ plugin normalize â†’ ä¸Ÿçµ¦ Gateway
- **Outbound**ï¼šGateway è¦å›è¦† â†’ plugin format â†’ å‘¼å« platform API é€å‡ºå»

<AnalogyBox title="ğŸ”Œ FastAPI Middleware">

ç”¨ FastAPI çš„èªè¨€ï¼šæ¯å€‹ channel plugin å°±åƒä¸€å€‹ middlewareã€‚

- **Inbound** = `request` middleware â€”â€” æŠŠå„ç¨®å¥‡æ€ªçš„ request format è½‰æˆä½ çš„æ¨™æº– schema
- **Outbound** = `response` middleware â€”â€” æŠŠä½ çš„æ¨™æº– response è½‰æˆ client è¦çš„æ ¼å¼

å·®åˆ¥åªæ˜¯ FastAPI çš„ middleware è™•ç† HTTP request/responseï¼Œchannel plugin è™•ç†çš„æ˜¯ chat messageã€‚

</AnalogyBox>

Python pseudocode ç†è§£ plugin çš„æ ¸å¿ƒä»‹é¢ï¼š

```python
# Pseudocodeï¼šChannel Plugin çš„éª¨æ¶
class ChannelPlugin:
    def __init__(self, config):
        self.config = config

    # Inbound: å¹³å° â†’ OpenClaw
    def normalize_message(self, raw_event) -> StandardMessage:
        """æŠŠå¹³å°çš„ raw event è½‰æˆæ¨™æº–æ ¼å¼"""
        return StandardMessage(
            channel="telegram",
            chat_id=raw_event["chat"]["id"],
            text=raw_event["text"],
            attachments=self.extract_attachments(raw_event),
            sender=raw_event["from"]["id"],
        )

    # Outbound: OpenClaw â†’ å¹³å°
    def send_reply(self, standard_reply: StandardReply):
        """æŠŠæ¨™æº–å›è¦†è½‰æˆå¹³å°æ ¼å¼ä¸¦é€å‡º"""
        platform_payload = self.format_for_platform(standard_reply)
        self.platform_api.send(platform_payload)
```

<ClawdNote>
TypeScript é‚£é‚Šç”¨çš„æ˜¯ interface + class implementï¼Œæ¦‚å¿µå®Œå…¨ä¸€æ¨£ã€‚Plugin SDK é‚„æä¾›å¾ˆå¤š helperï¼šattachment ä¸‹è¼‰ã€message chunkingï¼ˆå¤ªé•·çš„è¨Šæ¯è‡ªå‹•åˆ‡æ®µï¼‰ã€reply formattingã€‚ä½ ä¸éœ€è¦è‡ªå·±è™•ç†æ¯å€‹å¹³å°çš„å¥‡æ€ªé™åˆ¶ã€‚
</ClawdNote>

**Plugin SDK å¹«ä½ è™•ç†çš„é«’æ´»**

- **Message normalize**ï¼šTelegram æœ‰ `message_id`ã€Discord æœ‰ `snowflake`ï¼ŒSDK å¹«ä½ çµ±ä¸€
- **Attachment handling**ï¼šæ¯å€‹å¹³å°çš„ä¸Šå‚³ä¸‹è¼‰ API éƒ½ä¸åŒ
- **Reply formatting**ï¼šTelegram ç”¨ MarkdownV2ã€Discord ç”¨æ¨™æº– Markdownã€WhatsApp åªæ”¯æ´åŸºæœ¬æ ¼å¼ï¼ŒSDK å¹«ä½ æå®š
- **Rate limit**ï¼šæ¯å€‹å¹³å°æœ‰è‡ªå·±çš„é€Ÿç‡é™åˆ¶ï¼ŒSDK å…§å»º throttle

<LevelUpQuiz
  question="Plugin SDK çš„ä¸»è¦åŠŸèƒ½æ˜¯ä»€éº¼ï¼Ÿ"
  options={[
    { label: "A", text: "ç›´æ¥å‘¼å« LLM API" },
    { label: "B", text: "æä¾›æ¨™æº–ä»‹é¢å’Œ helperï¼Œè®“ channel plugin çµ±ä¸€è™•ç† inbound/outbound è¨Šæ¯" },
    { label: "C", text: "ç®¡ç†è³‡æ–™åº«é€£ç·š" },
    { label: "D", text: "ç”¢ç”Ÿç¶²é å‰ç«¯" },
  ]}
  answer="B"
  explanation="Plugin SDK æä¾›çµ±ä¸€çš„ä»‹é¢ï¼ˆinbound normalizeã€outbound formatï¼‰å’Œ helperï¼ˆattachmentã€rate limitã€message chunkingï¼‰ï¼Œæ¯å€‹ channel plugin ä¸éœ€è¦å¾é›¶é–‹å§‹ã€‚"
/>

---

## ğŸ° Floor 2ï¼šTelegram æ·±å…¥ï¼ˆä½ æ¯å¤©éƒ½åœ¨ç”¨çš„ï¼‰

<LevelUpProgress current={2} total={10} title="Channels & Tools" />

ä½ ç¾åœ¨æ¯å¤©è·Ÿæˆ‘å°è©±ç”¨çš„å°±æ˜¯ Telegramã€‚ä¾†çœ‹çœ‹èƒŒå¾Œæ€éº¼é‹ä½œçš„ã€‚

**Telegram Bot API å…©ç¨®æ¨¡å¼**

- **Long Polling**ï¼šOpenClaw æ¯éš”å¹¾ç§’å• Telegramï¼šã€Œæœ‰æ–°è¨Šæ¯å—ï¼Ÿã€â€”â€” åƒå°å­©æ¯äº”åˆ†é˜å•ä¸€æ¬¡ã€Œåˆ°äº†æ²’ã€
- **Webhook**ï¼šTelegram æœ‰æ–°è¨Šæ¯å°±ä¸»å‹•æ¨é€åˆ°ä½ çš„ server â€”â€” åƒå¤–é€åˆ°äº†æŒ‰é–€éˆ´

é è¨­ç”¨ **Long Polling**ï¼ˆä¸éœ€è¦ public IPï¼‰ï¼Œä¹Ÿæ”¯æ´ Webhookï¼ˆæ›´çœè³‡æºä½†éœ€è¦ HTTPS endpointï¼‰ã€‚

```python
# Long Polling pseudocode
async def telegram_polling():
    offset = 0
    while True:
        updates = await telegram_api.get_updates(offset=offset)
        for update in updates:
            normalized = normalize_message(update)
            await gateway.handle_inbound(normalized)
            offset = update["update_id"] + 1
```

**Group Chat + Forum Topic**

Telegram æœ‰å…©ç¨®ç¾¤çµ„è¡Œç‚ºï¼š

- **ä¸€èˆ¬ group**ï¼šæ‰€æœ‰è¨Šæ¯éƒ½åœ¨åŒä¸€å€‹ chat_id ä¸‹
- **Forumï¼ˆè¶…ç´šç¾¤çµ„ + topicsï¼‰**ï¼šæ¯å€‹ topic æœ‰è‡ªå·±çš„ thread_id

é‚„è¨˜å¾— Lv-04 çš„ session key å—ï¼Ÿ`channel:chat_id:thread_id`ã€‚Forum çš„æ¯å€‹ topic æœƒè‡ªå‹•è®Šæˆç¨ç«‹ session â€”â€” ä½ åœ¨ã€Œé–’èŠã€topic èŠçš„æ±è¥¿ä¸æœƒè·‘åˆ°ã€Œç¨‹å¼ã€topicã€‚

**Inline Buttonsã€Reactionsã€40 å€‹ test files**

Telegram çš„ inline keyboardï¼ˆæŒ‰éˆ•é¸å–®ï¼‰ã€message reactionsï¼ˆè¡¨æƒ…å›æ‡‰ï¼‰ï¼ŒOpenClaw å…¨éƒ¨æ”¯æ´ã€‚AI å¯ä»¥é€å‡ºå¸¶æŒ‰éˆ•çš„è¨Šæ¯ï¼Œä¹Ÿå¯ä»¥å°ä½ çš„è¨Šæ¯æŒ‰ emojiã€‚

Telegram plugin æœ‰ **40 å€‹ test files**ï¼Œåœ¨æ‰€æœ‰ channel è£¡æœ€å¤šã€‚å› ç‚ºåŠŸèƒ½æœ€è±å¯Œï¼ˆgroupã€topicã€inline buttonã€reactionã€stickerã€voiceã€file uploadâ€¦â€¦ï¼‰ï¼Œæ¯å€‹éƒ½è¦æ¸¬ã€‚

<ClawdNote variant="praise">
40 å€‹ test files ä¸æ˜¯é–‹ç©ç¬‘çš„ã€‚æ¯å€‹ edge case éƒ½è¦†è“‹ï¼šgroup åŠ å…¥/é€€å‡ºã€topic å»ºç«‹/åˆªé™¤ã€inline button callbackã€reaction å¢åŠ /ç§»é™¤ã€‚é€™å°±æ˜¯ production-ready çš„æ°´æº–ã€‚
</ClawdNote>

<LevelUpQuiz
  question="OpenClaw çš„ Telegram plugin é è¨­ç”¨å“ªç¨®æ¨¡å¼æ¥æ”¶è¨Šæ¯ï¼Ÿ"
  options={[
    { label: "A", text: "Webhook" },
    { label: "B", text: "Long Polling" },
    { label: "C", text: "WebSocket" },
    { label: "D", text: "Email forwarding" },
  ]}
  answer="B"
  explanation="é è¨­ç”¨ Long Pollingï¼ˆä¸éœ€è¦ public IP/domainï¼‰ï¼Œä¹Ÿæ”¯æ´ Webhookï¼ˆæ›´çœè³‡æºä½†éœ€è¦ HTTPS endpointï¼‰ã€‚Long polling æ¯éš”å¹¾ç§’ä¸»å‹•å• Telegram æœ‰æ²’æœ‰æ–°è¨Šæ¯ã€‚"
/>

---

## ğŸ° Floor 3ï¼šDiscord æ•´åˆ

<LevelUpProgress current={3} total={10} title="Channels & Tools" />

Discord è·Ÿ Telegram æ¶æ§‹ä¸Šæœ€å¤§çš„å·®åˆ¥ï¼šDiscord æœ¬èº«ä¹Ÿç”¨ **WebSocket**ã€‚

**Discord Gateway WebSocket**

Discord bot ä¸»è¦é€é **Discord Gateway** å»ºç«‹ WebSocket é€£ç·šï¼ˆä¸æ˜¯ pollingã€ä¸æ˜¯ webhookï¼‰ï¼Œæ”¶åˆ° event å°±è™•ç†ï¼š

```python
# Discord bot çš„é€£ç·šæ–¹å¼ï¼ˆpseudocodeï¼‰
async def discord_connect():
    ws = await websockets.connect("wss://gateway.discord.gg/?v=10")
    await ws.send(json.dumps({
        "op": 2, "d": {"token": BOT_TOKEN, "intents": 33281}  # IDENTIFY
    }))
    async for event in ws:
        data = json.loads(event)
        if data["t"] == "MESSAGE_CREATE":
            await gateway.handle_inbound(normalize_discord_message(data["d"]))
```

<ClawdNote variant="murmur">
æ˜¯çš„ï¼ŒOpenClaw Gateway ç”¨ WebSocket è·Ÿå…ƒä»¶æºé€šï¼ˆLv-04 è¬›éï¼‰ï¼ŒDiscord ä¹Ÿç”¨ WebSocket è·Ÿ bot æºé€šã€‚WebSocket å¥— WebSocketï¼Œæœ‰é»åƒå¤¢ä¸­å¤¢ã€‚
</ClawdNote>

**Intent System â€”â€” æœ€å®¹æ˜“è¸©çš„å‘**

Discord 2022 å¹´å¾Œå¼·åˆ¶è¦æ±‚ bot å®£å‘Š **Intent**ï¼ˆæ„åœ–ï¼‰ï¼Œä½ æƒ³è®€ä»€éº¼è³‡æ–™å°±è¦é–‹ä»€éº¼ Intentï¼š

- **Presence Intent** â€” çœ‹èª°åœ¨ç·šä¸Š
- **Server Members Intent** â€” è®€å–æˆå“¡åˆ—è¡¨
- **Message Content Intent** â€” è®€å–è¨Šæ¯å…§å®¹

**é‡é»ä¾†äº†ï¼šæ²’é–‹ Message Content Intent = ä½ çš„ bot æ”¶åˆ°çš„è¨Šæ¯ content æ˜¯ç©ºçš„ã€‚** ä¸æœƒå ±éŒ¯ã€ä¸æœƒæœ‰è­¦å‘Šï¼Œå°±æ˜¯éœæ‚„æ‚„åœ°æ”¶åˆ°ç©ºè¨Šæ¯ã€‚

<ClawdNote variant="murmur">
é€™å€‹å‘çœŸçš„æœ‰å¤ é™°ã€‚debug çš„æ™‚å€™ä½ çœ‹åˆ° event æ­£å¸¸æ”¶åˆ°ï¼Œlog è£¡ message ä¹Ÿæœ‰ï¼Œä½† content æ°¸é æ˜¯ç©ºå­—ä¸²ã€‚ä½ ä»¥ç‚ºæ˜¯ parsing bugï¼Œæäº†åŠå¤©æ‰ç™¼ç¾æ˜¯ Intent æ²’å‹¾ã€‚Discord é€™å€‹è¨­è¨ˆä¸æ˜¯ bugï¼Œæ˜¯ featureï¼Œä½†å®ƒå‘æ­»çš„äººæ¯” bug é‚„å¤šã€‚
</ClawdNote>

**æ¯å€‹ Channel = ç¨ç«‹ Session**

Discord çš„æ¯å€‹ text channel éƒ½æ˜¯ç¨ç«‹çš„ sessionã€‚è·Ÿ Telegram forum topic ä¸€æ¨£çš„é‚è¼¯ â€”â€” session key çš„ `chat_id` å°æ‡‰ Discord çš„ channel IDã€‚

**Channel Topic = System Prompt**

æœ€é…·çš„åŠŸèƒ½ï¼šæŠŠ Discord channel çš„ **topic**ï¼ˆé »é“æè¿°ï¼‰ç•¶ä½œ system promptã€‚

æƒ³è®“ bot åœ¨ `#coding` é »é“è®Šæˆç¨‹å¼åŠ©æ‰‹ï¼ŸæŠŠ topic æ”¹æˆã€Œä½ æ˜¯ä¸€å€‹ Python å°ˆå®¶ï¼Œåªå›ç­”ç¨‹å¼å•é¡Œã€ã€‚æƒ³åœ¨ `#story` é »é“è®Šæˆå°èªªå®¶ï¼Ÿæ”¹ topic å°±å¥½ã€‚**é›¶é…ç½®ï¼Œæ”¹æè¿°å³ç”Ÿæ•ˆã€‚**

Discord plugin æœ‰ **26 å€‹ test files**ã€‚

<LevelUpQuiz
  question="Discord bot æ²’é–‹ Message Content Intent æœƒæ€æ¨£ï¼Ÿ"
  options={[
    { label: "A", text: "Bot ç„¡æ³•é€£ä¸Š Discord" },
    { label: "B", text: "æ”¶åˆ°éŒ¯èª¤è¨Šæ¯" },
    { label: "C", text: "éœæ‚„æ‚„æ”¶åˆ°ç©ºçš„è¨Šæ¯å…§å®¹ï¼Œä¸æœƒæœ‰ä»»ä½•è­¦å‘Š" },
    { label: "D", text: "åªèƒ½è®€åˆ°å‰ 100 å€‹å­—" },
  ]}
  answer="C"
  explanation="æ²’é–‹ Message Content Intent = è¨Šæ¯å…§å®¹æ˜¯ç©ºå­—ä¸²ï¼Œä¸å ±éŒ¯ã€ä¸è­¦å‘Šã€‚é€™æ˜¯ Discord æœ€é™°çš„å‘ä¹‹ä¸€ï¼Œdebug æ¥µåº¦ç—›è‹¦ã€‚"
/>

---

## ğŸ° Floor 4ï¼šChannel Routing & Access Control

<LevelUpProgress current={4} total={10} title="Channels & Tools" />

Channel æ”¶åˆ°è¨Šæ¯äº†ï¼Œä½†æ€éº¼æ±ºå®šã€Œèª°æœ‰æ¬Šé™è·Ÿ AI èªªè©±ã€ï¼Ÿåˆæ€éº¼æ±ºå®šã€Œè¨Šæ¯è¦é€çµ¦å“ªå€‹ agentã€ï¼Ÿ

**Pairing System**

è£ç½®é…å°ã€‚ä½ çš„æ‰‹æ©Ÿã€é›»è…¦è¦é€é **pairing** è·Ÿ OpenClaw Gateway é…å°ã€‚Nodeï¼ˆè£ç½®ï¼‰è¦å…ˆé…å°æ‰èƒ½ç”¨ï¼Œæœªé…å°çš„è£ç½®æœƒè¢«æ“‹åœ¨é–€å¤–ã€‚

**Allow List**

ä¸æ˜¯æ‰€æœ‰äººéƒ½èƒ½è·Ÿä½ çš„ AI èªªè©±ã€‚config è£¡è¨­å®š **allow list**ï¼š

```python
# config.yaml è£¡çš„æ¦‚å¿µï¼ˆpseudocodeï¼‰
access_control = {
    "telegram": {
        "allowed_users": [123456789, 987654321],
        "allowed_groups": [-1001234567890],
    },
    "discord": {
        "allowed_guilds": ["guild_id_abc"],
    }
}
```

ä¸åœ¨æ¸…å–®ä¸Šçš„äººç™¼è¨Šæ¯ï¼Ÿ**ç›´æ¥å¿½ç•¥**ã€‚ä¸å›è¦†ã€ä¸å ±éŒ¯ã€å‡è£æ²’è½åˆ°ã€‚

<AnalogyBox title="ğŸ  é–€ç¦ç³»çµ± + Party æ¨¡å¼">

ä½ å®¶å¤§é–€æœ‰é–€ç¦å¡ã€‚æœ‰å¡çš„äººåˆ·å¡é€²ä¾†ï¼ˆallow listï¼‰ï¼Œæ²’å¡çš„äººæŒ‰é–€éˆ´ä½ ä¸ç†ã€‚

Group chat åƒé–‹ party â€”â€” ä½ å¯ä»¥è¨­å®šï¼šè¦ä¸è¦æ‰€æœ‰äººèªªè©±éƒ½å›æ‡‰ï¼Œé‚„æ˜¯åªæœ‰ @ æ‰å›æ‡‰ã€‚è‡ªå·±çš„ç¾¤çµ„å¯ä»¥ä¸ç”¨ @ï¼Œåˆ¥äººçš„ç¾¤çµ„å»ºè­°è¦ @ï¼ˆä¸ç„¶å¤ªåµï¼‰ã€‚

</AnalogyBox>

<ClawdNote variant="murmur">
æˆ‘åœ¨ä½ çš„ Telegram group è£¡æ˜¯è¨­å®šä¸ç”¨ @ å°±æœƒå›æ‡‰çš„ã€‚æ‰€ä»¥ä½ èªªã€Œå¹«æˆ‘æŸ¥å¤©æ°£ã€æˆ‘å°±å»æŸ¥äº†ï¼Œä¸ç”¨ç‰¹åˆ¥å«æˆ‘åå­—ã€‚ä½†å¦‚æœä½ æŠŠæˆ‘åŠ åˆ°ä¸€å€‹ 100 äººçš„ç¾¤çµ„ï¼Œå»ºè­°æ”¹æˆéœ€è¦ @ï¼Œä¸ç„¶å¤§å®¶æœƒä»¥ç‚ºç¾¤çµ„é¬§é¬¼ã€‚
</ClawdNote>

<LevelUpQuiz
  question="OpenClaw æ€éº¼æ§åˆ¶èª°èƒ½è·Ÿ AI èªªè©±ï¼Ÿ"
  options={[
    { label: "A", text: "ç”¨å¯†ç¢¼é©—è­‰" },
    { label: "B", text: "ç”¨ config è£¡çš„ allow listï¼Œä¸åœ¨æ¸…å–®ä¸Šçš„è¨Šæ¯ç›´æ¥å¿½ç•¥" },
    { label: "C", text: "æ‰€æœ‰äººéƒ½èƒ½èªªè©±ï¼Œæ²’æœ‰é™åˆ¶" },
    { label: "D", text: "ç”¨ CAPTCHA é©—è­‰" },
  ]}
  answer="B"
  explanation="Config è£¡è¨­å®š allow listï¼ˆå…è¨±çš„ user ID / group IDï¼‰ï¼Œä¸åœ¨æ¸…å–®ä¸Šçš„è¨Šæ¯ç›´æ¥å¿½ç•¥ã€‚æ­é… group chat å¯ä»¥è¨­å®šè¦ä¸è¦ @ æ‰å›æ‡‰ã€‚"
/>

---

## ğŸ° Floor 5ï¼šTools ç³»çµ±æ¦‚è§€

<LevelUpProgress current={5} total={10} title="Channels & Tools" />

åˆ°é€™è£¡ç‚ºæ­¢éƒ½æ˜¯ã€Œå˜´å·´å’Œè€³æœµã€ã€‚ç¾åœ¨ä¾†çœ‹ã€Œæ‰‹è…³ã€â€”â€” **Tools**ã€‚

> **Tools = AI èƒ½åšäº‹çš„èƒ½åŠ›ã€‚æ²’æœ‰ tools çš„ AI åªæ˜¯å€‹å˜´ç ²ï¼›æœ‰äº† tools æ‰èƒ½çœŸçš„å¹«ä½ å¹¹æ´»ã€‚**

<AnalogyBox title="ğŸ› ï¸ FastAPI çš„ OpenAPI Spec">

ä½ å¯« FastAPI æ™‚ï¼Œæ¯å€‹ endpoint éƒ½æœ‰ OpenAPI specï¼ˆè‡ªå‹•ç”¢ç”Ÿçš„ Swagger docsï¼‰ã€‚AI çœ‹åˆ° spec å°±çŸ¥é“ã€Œé€™å€‹ endpoint æ¥å—ä»€éº¼åƒæ•¸ã€å›å‚³ä»€éº¼æ ¼å¼ã€ã€‚

OpenClaw çš„ tools ä¸€æ¨¡ä¸€æ¨£ â€”â€” æ¯å€‹ tool æœ‰ **JSON Schema** å®šç¾©ã€‚AI çœ‹åˆ° schema å°±çŸ¥é“æ€éº¼å‘¼å«ã€‚

å·®åˆ¥ï¼šFastAPI æ˜¯ **ä½ å‘¼å« API**ï¼ŒOpenClaw æ˜¯ **AI è‡ªå·±å‘¼å« tool**ã€‚

</AnalogyBox>

**å…§å»º tools ä¸€è¦½**

- **exec** â€” è·‘ shell commandï¼ˆ`git status`ã€`npm run build`ï¼‰
- **browser** â€” æ“ä½œç€è¦½å™¨ï¼ˆclickã€screenshotã€navigateï¼‰
- **read / write / edit** â€” è®€å¯«ç·¨è¼¯æª”æ¡ˆ
- **web_search / web_fetch** â€” æœå°‹ç¶²é  / æŠ“ç¶²é å…§å®¹
- **message** â€” ç™¼è¨Šæ¯åˆ° channel
- **cron** â€” æ’ç¨‹ä»»å‹™
- **nodes** â€” æ§åˆ¶é…å°è£ç½®ï¼ˆæ‰‹æ©Ÿæ‹ç…§ã€æˆªåœ–ã€å®šä½ï¼‰
- **image / tts** â€” åˆ†æåœ–ç‰‡ / æ–‡å­—è½‰èªéŸ³
- **subagents** â€” ç”¢ç”Ÿå­ agent è™•ç†è¤‡é›œä»»å‹™

æ¯å€‹ tool ç”¨ JSON Schema å®šç¾©ï¼ŒAI çœ‹åˆ°å°±çŸ¥é“æ€éº¼å‘¼å«ï¼š

```python
# Tool å®šç¾©çš„æ¦‚å¿µï¼ˆpseudocodeï¼‰
tool_definition = {
    "name": "exec",
    "description": "Execute shell commands",
    "parameters": {
        "type": "object",
        "properties": {
            "command": {"type": "string"},
            "background": {"type": "boolean"},
        },
        "required": ["command"],
    },
}
# AI çœ‹åˆ° â†’ æ±ºå®šè¦ä¸è¦ç”¨ â†’ çµ„åƒæ•¸ â†’ Gateway åŸ·è¡Œ â†’ çµæœå›å‚³ â†’ AI ç¹¼çºŒæ€è€ƒ
```

<ClawdNote variant="murmur">
èªªç™½äº†ï¼Œtool å°±æ˜¯ AI çš„ API clientã€‚ä½†ä¸æ˜¯ä½ å¯«å¥½ API call è®“ AI åŸ·è¡Œï¼Œæ˜¯ AI **è‡ªå·±çœ‹ spec è‡ªå·±æ±ºå®šæ€éº¼ call**ã€‚ä½ åªéœ€è¦å‘Šè¨´å®ƒä½ æƒ³å¹¹å˜›ï¼Œå®ƒè‡ªå·±çµ„ API callã€‚é€™å°±æ˜¯ç‚ºä»€éº¼ AI agent è·Ÿå‚³çµ± bot æ˜¯ä¸åŒç­‰ç´šçš„æ±è¥¿ã€‚
</ClawdNote>

<LevelUpQuiz
  question="OpenClaw çš„ tool å®šç¾©ç”¨ä»€éº¼æ ¼å¼ï¼Ÿ"
  options={[
    { label: "A", text: "YAML" },
    { label: "B", text: "XML" },
    { label: "C", text: "JSON Schemaï¼ˆè·Ÿ OpenAI function calling ä¸€æ¨£ï¼‰" },
    { label: "D", text: "Protocol Buffers" },
  ]}
  answer="C"
  explanation="æ¯å€‹ tool ç”¨ JSON Schema å®šç¾©åç¨±ã€æè¿°ã€åƒæ•¸ã€‚AI çœ‹åˆ° schema å°±çŸ¥é“æ€éº¼å‘¼å«ã€‚è·Ÿ OpenAI function calling çš„æ¦‚å¿µç›¸åŒã€‚"
/>

---

## ğŸ° Floor 6ï¼šExec & Process â€” èƒŒæ™¯åŸ·è¡Œ

<LevelUpProgress current={6} total={10} title="Channels & Tools" />

**exec** å¯èƒ½æ˜¯ç”¨æœ€å¤šçš„ tool â€”â€” å®ƒè®“ AI å¯ä»¥è·‘ shell commandã€‚

åŸºæœ¬ç”¨æ³•å¾ˆç›´è¦ºï¼šAI è¦è·‘ `git status`ï¼Œå°±å‘¼å« exec tool å¸¶ `command: "git status"`ã€‚ä½† exec å¼·å¤§åœ¨å®ƒçš„é€²éšåŠŸèƒ½ã€‚

**Background Mode**

æœ‰äº› command æœƒè·‘å¾ˆä¹…ï¼ˆ`npm run build`ã€`docker pull`ï¼‰ã€‚å¦‚æœ AI å‚»å‚»ç­‰åˆ°è·‘å®Œæ‰å›è¦†ï¼Œä½ å°±æœƒçœ‹åˆ°ä¸€å€‹æ¼«é•·çš„ã€Œæ­£åœ¨æ€è€ƒâ‹¯â‹¯ã€ã€‚

Background mode è§£æ±ºé€™å€‹å•é¡Œï¼š

```python
# Pseudocode: background exec
exec(command="npm run build", background=True)
# AI ä¸æœƒç­‰åˆ° build å®Œæ‰å›è©±
# ä¹‹å¾Œå¯ä»¥ç”¨ process tool ä¾† poll çµæœ

# ç­‰ä¸€ä¸‹æª¢æŸ¥çµæœ
result = process(action="poll", session_id="abc123")
```

<ClawdNote>
Python é¡æ¯”ï¼š`subprocess.Popen()` ä½†ä¸å‘¼å« `.wait()`ã€‚process ä¸Ÿåˆ°èƒŒæ™¯ï¼Œä¹‹å¾Œå†å›ä¾†æ”¶çµæœã€‚
</ClawdNote>

**PTY Mode**

æœ‰äº› CLI å·¥å…·éœ€è¦ TTYï¼ˆterminalï¼‰æ‰èƒ½æ­£å¸¸é‹ä½œ â€”â€” ä¾‹å¦‚ `vim`ã€`htop`ã€æˆ–ä»»ä½•æœ‰äº’å‹•å¼ UI çš„æ±è¥¿ã€‚

PTY mode è®“ exec é–‹ä¸€å€‹ pseudo-terminalï¼Œå°±åƒ SSH é€²å»ä¸€æ¨£ã€‚

**Process Management**

èƒŒæ™¯åŸ·è¡Œçš„ process ä¸æ˜¯ä¸Ÿäº†å°±ä¸ç®¡ã€‚ä½ å¯ä»¥ï¼š

- **poll** â€” æª¢æŸ¥é€²åº¦ï¼ˆstdout ç”¢ç”Ÿäº†ä»€éº¼ï¼‰
- **kill** â€” ç æ‰å®ƒ
- **send-keys** â€” é€æŒ‰éµï¼ˆ`Ctrl+C`ã€`Enter`ã€ç”šè‡³æ–¹å‘éµï¼‰
- **write** â€” å¯«å…¥ stdin

<AnalogyBox title="ğŸ–¥ï¸ subprocess.Popen + tmux">

Python çš„ `subprocess.Popen` è®“ä½ å•Ÿå‹• process ä½†æ²’è¾¦æ³• attach å›å»çœ‹ç•«é¢ã€‚`tmux` è®“ä½  detach/attach terminal sessionã€‚

OpenClaw çš„ exec + process å°±æ˜¯å…©è€…çš„çµåˆï¼šèƒŒæ™¯åŸ·è¡Œï¼ˆPopenï¼‰+ éš¨æ™‚ attach çœ‹ç•«é¢ã€é€æŒ‰éµï¼ˆtmuxï¼‰ã€‚å…¨éƒ¨é€é API æ“ä½œï¼Œä¸éœ€è¦çœŸçš„ SSH é€²å»ã€‚

</AnalogyBox>

<ClawdNote variant="murmur">
æˆ‘æ¯å¤©å°±åœ¨ç”¨é€™å€‹ã€‚ä½ å«æˆ‘ã€Œbuild é‚£å€‹ projectã€ï¼Œæˆ‘å°± exec background é–‹å§‹ buildï¼Œå…ˆå›ä½ ã€Œé–‹å§‹ build äº†ã€ï¼Œç„¶å¾Œå·å· poll ç­‰çµæœï¼Œbuild å®Œå†å‘Šè¨´ä½ æˆåŠŸæˆ–å¤±æ•—ã€‚ä½ æ„Ÿè¦ºä¸Šåªæ˜¯ç­‰äº†å¹¾ç§’ï¼Œä½†èƒŒå¾Œæ˜¯ background exec + poll çš„é…åˆã€‚
</ClawdNote>

<LevelUpQuiz
  question="exec çš„ PTY mode æ˜¯ç”¨ä¾†åšä»€éº¼çš„ï¼Ÿ"
  options={[
    { label: "A", text: "åŠ å¯† shell command" },
    { label: "B", text: "é–‹ä¸€å€‹ pseudo-terminalï¼Œè®“éœ€è¦ TTY çš„ CLI å·¥å…·èƒ½æ­£å¸¸é‹ä½œ" },
    { label: "C", text: "æŠŠ output è½‰æˆ PDF" },
    { label: "D", text: "é™åˆ¶ CPU ä½¿ç”¨ç‡" },
  ]}
  answer="B"
  explanation="PTY mode é–‹ä¸€å€‹ pseudo-terminalï¼ˆè™›æ“¬çµ‚ç«¯ï¼‰ï¼Œè®“éœ€è¦ TTY çš„äº’å‹•å¼ CLI å·¥å…·ï¼ˆvimã€htop ç­‰ï¼‰èƒ½æ­£å¸¸é‹ä½œã€‚æ­é… send-keys å°±èƒ½æ“ä½œé€™äº›å·¥å…·ã€‚"
/>

---

## ğŸ° Floor 7ï¼šBrowser è‡ªå‹•åŒ–

<LevelUpProgress current={7} total={10} title="Channels & Tools" />

AI é™¤äº†è·‘ shell commandï¼Œé‚„èƒ½æ“ä½œç€è¦½å™¨ã€‚

OpenClaw çš„ browser tool åŸºæ–¼ **Playwright** â€”â€” å¦‚æœä½ æœ‰å¯«é gu-log çš„ e2e testï¼Œä½ å°±çŸ¥é“ Playwright æ˜¯å•¥ã€‚

èƒ½åšä»€éº¼ï¼Ÿnavigateï¼ˆé–‹ URLï¼‰ã€snapshotï¼ˆæŠ“ DOMï¼‰ã€screenshotï¼ˆæˆªåœ–ï¼‰ã€click/type/pressï¼ˆæ“ä½œ UIï¼‰ã€evaluateï¼ˆè·‘ JavaScriptï¼‰ã€‚

```python
# Pseudocode: browser è‡ªå‹•åŒ–
browser(action="navigate", url="https://example.com")
browser(action="snapshot")  # æ‹¿åˆ° DOM çµæ§‹
browser(action="act", request={"kind": "click", "ref": "button_login"})
browser(action="act", request={"kind": "type", "ref": "input_email", "text": "hi@example.com"})
browser(action="screenshot")  # æˆªåœ–ç¢ºèªçµæœ
```

<ClawdNote>
Python é¡æ¯”ï¼šå°±åƒ `playwright.sync_api`ï¼Œä½†ä¸æ˜¯ä½ å¯« scriptï¼Œæ˜¯ AI çœ‹è‘— DOM snapshot è‡ªå·±æ±ºå®šè¦é»å“ªè£¡ã€æ‰“ä»€éº¼å­—ã€‚
</ClawdNote>

**å…©ç¨® Profile**

- **openclaw** â€” isolated ç€è¦½å™¨ï¼Œé©åˆçˆ¬èŸ²ã€æˆªåœ–ï¼ˆè·Ÿä½ çš„ Chrome ç„¡é—œï¼‰
- **chrome** â€” é€é Chrome extension relay æ¥ç®¡ä½ ç¾æœ‰çš„ tabï¼Œæœ‰ä½ çš„ç™»å…¥ç‹€æ…‹ï¼ˆé©åˆ Gmailã€Google Sheetsï¼‰

**å®‰å…¨ï¼šSSRF Protection**

ç€è¦½å™¨èƒ½é€£ä»»ä½• URLï¼ŒAI æœƒä¸æœƒäº‚é€£ä½ çš„å…§ç¶²ï¼Ÿä¸æœƒ â€”â€” OpenClaw å…§å»º **SSRF protection**ï¼Œé è¨­æ“‹æ‰ `localhost`ã€`127.0.0.1`ã€`192.168.*`ã€`10.*` ç­‰å…§éƒ¨ç¶²è·¯ä½å€ã€‚

<ClawdNote variant="murmur">
æƒ³åƒ AI è‡ªå·±æ‰“é–‹ç€è¦½å™¨èªªã€Œè®“æˆ‘çœ‹çœ‹ 192.168.1.1 çš„ router admin pageã€â€”â€” è¢«æ“‹ã€‚ã€Œé‚£ localhost:3000 çš„ admin panelï¼Ÿã€â€”â€” ä¹Ÿè¢«æ“‹ã€‚å¥½å­©å­ä¸äº‚é€£å…§ç¶²ã€‚
</ClawdNote>

<LevelUpQuiz
  question="OpenClaw browser tool çš„ chrome profile æ˜¯åšä»€éº¼çš„ï¼Ÿ"
  options={[
    { label: "A", text: "å®‰è£ Chrome ç€è¦½å™¨" },
    { label: "B", text: "æ¥ç®¡ä½ ç¾æœ‰çš„ Chrome tabï¼Œå¯ä»¥ä½¿ç”¨ä½ çš„ç™»å…¥ç‹€æ…‹" },
    { label: "C", text: "æŠŠ Chrome çš„æ›¸ç±¤åŒ¯å…¥" },
    { label: "D", text: "é–‹ä¸€å€‹å…¨æ–°çš„ Chrome instance" },
  ]}
  answer="B"
  explanation="chrome profile é€é Chrome extension relay æ¥ç®¡ä½ ç¾æœ‰çš„ Chrome tabï¼Œå¯ä»¥ä½¿ç”¨ä½ çš„ç™»å…¥ç‹€æ…‹ã€‚é©åˆéœ€è¦èªè­‰çš„æ“ä½œï¼ˆGmailã€Google Sheets ç­‰ï¼‰ã€‚"
/>

---

## ğŸ° Floor 8ï¼šTool Policy Resolutionï¼ˆallow/deny/sandboxï¼‰

<LevelUpProgress current={8} total={10} title="Channels & Tools" />

Tools å¾ˆå¼·å¤§ï¼Œä½†**å¼·å¤§ = å±éšª**ã€‚AI èƒ½è·‘ shell command ä»£è¡¨å®ƒèƒ½ `rm -rf /`ï¼›èƒ½æ“ä½œç€è¦½å™¨ä»£è¡¨å®ƒèƒ½çœ‹ä½ çš„ emailã€‚

æ‰€ä»¥ OpenClaw æœ‰ä¸€å¥— **ä¸‰å±¤å®‰å…¨æ¨¡å‹**ã€‚

<AnalogyBox title="ğŸ“± æ‰‹æ©Ÿ App æ¬Šé™ç³»çµ±">

ä½ çš„æ‰‹æ©Ÿï¼š
- ç›¸æ©Ÿ â†’ é–‹ / é—œ
- éº¥å…‹é¢¨ â†’ é–‹ / é—œ
- ä½ç½® â†’ ç²¾ç¢º / æ¨¡ç³Š / é—œ
- å„²å­˜ç©ºé–“ â†’ å®Œæ•´å­˜å– / åƒ…åª’é«” / é—œ

æ¯å€‹ app å„è‡ªè¨­å®šã€‚OpenClaw çš„ tool policy ä¸€æ¨¡ä¸€æ¨£ â€”â€” æ¯å€‹ toolã€æ¯å€‹ exec æ¬Šé™ï¼Œå„è‡ªé–‹é—œã€‚

</AnalogyBox>

**ç¬¬ä¸€å±¤ï¼šTool Policyï¼ˆå“ªäº› tool å¯ä»¥ç”¨ï¼‰**

```python
# Pseudocode: tool policy
tool_policy = {
    "exec": "allow",       # å…è¨±è·‘ shell
    "browser": "allow",    # å…è¨±æ“ä½œç€è¦½å™¨
    "message": "allow",    # å…è¨±ç™¼è¨Šæ¯
    "nodes": "deny",       # ä¸å…è¨±æ§åˆ¶è£ç½®
}
```

ç›´æ¥ allow / deny æ•´å€‹ toolã€‚deny çš„ toolï¼ŒAI æ ¹æœ¬çœ‹ä¸åˆ°ã€ä¸çŸ¥é“å®ƒå­˜åœ¨ã€‚

**ç¬¬äºŒå±¤ï¼šExec Securityï¼ˆshell command çš„æ¬Šé™ï¼‰**

exec æœ€å±éšªï¼ˆèƒ½è·‘ä»»ä½•æŒ‡ä»¤ï¼‰ï¼Œæ‰€ä»¥æœ‰ä¸‰ç¨®æ¨¡å¼ï¼š

- **deny** â€” å®Œå…¨ç¦æ­¢
- **allowlist** â€” åªå…è¨±ç™½åå–®è£¡çš„æŒ‡ä»¤ï¼ˆ`git`ã€`npm` OKï¼Œ`rm` æ“‹ï¼‰
- **full** â€” å®Œå…¨é–‹æ”¾ï¼ˆä¿¡ä»» AI çš„æ™‚å€™ç”¨ï¼‰

**ç¬¬ä¸‰å±¤ï¼šElevated Modeï¼ˆsudo æ“ä½œï¼‰**

å°±ç®— exec = fullï¼Œéœ€è¦ **sudo** çš„æ“ä½œé‚„æ˜¯è¦é¡å¤–æˆæ¬Šã€‚AI æœƒå•ï¼šã€Œæˆ‘éœ€è¦ elevated permissionï¼Œå¯ä»¥å—ï¼Ÿã€

```python
# ä¸‰å±¤å®‰å…¨çš„ decision treeï¼ˆpseudocodeï¼‰
def can_execute(tool_name, command=None, needs_sudo=False):
    if tool_policy[tool_name] == "deny":       # ç¬¬ä¸€å±¤
        return False
    if tool_name == "exec":                     # ç¬¬äºŒå±¤
        if exec_security == "deny":
            return False
        if exec_security == "allowlist" and command not in allowed_commands:
            return False
    if needs_sudo and not elevated_approved:    # ç¬¬ä¸‰å±¤
        return False
    return True
```

<ClawdNote variant="murmur">
ä½ ç¾åœ¨çš„ setup æ˜¯ exec security = fullã€elevated = éœ€è¦è©¢å•ã€‚ç™½è©±æ–‡ï¼šæˆ‘å¯ä»¥è·‘ä»»ä½•æŒ‡ä»¤ï¼Œä½†è¦ sudo çš„æ™‚å€™æœƒå…ˆå•ä½ ã€‚å°±åƒä¸€å€‹å¾ˆæœ‰èƒ½åŠ›ä½†çŸ¥é“åˆ†å¯¸çš„å“¡å·¥ â€”â€” æ—¥å¸¸å·¥ä½œè‡ªå·±æå®šï¼Œéœ€è¦ä¸»ç®¡ç°½åçš„æœƒä¾†å•ä½ ã€‚
</ClawdNote>

<LevelUpQuiz
  question="Exec security çš„ allowlist æ¨¡å¼æ˜¯ä»€éº¼æ„æ€ï¼Ÿ"
  options={[
    { label: "A", text: "æ‰€æœ‰ command éƒ½å…è¨±" },
    { label: "B", text: "æ‰€æœ‰ command éƒ½ç¦æ­¢" },
    { label: "C", text: "åªå…è¨±ç™½åå–®è£¡çš„ commandï¼Œå…¶ä»–çš„æ“‹æ‰" },
    { label: "D", text: "æ¯æ¬¡åŸ·è¡Œéƒ½è¦ä½¿ç”¨è€…æ‰¹å‡†" },
  ]}
  answer="C"
  explanation="allowlist æ¨¡å¼ = åªå…è¨±é å…ˆè¨­å®šçš„ commandï¼ˆä¾‹å¦‚ gitã€npmã€nodeï¼‰ï¼Œå…¶ä»–å…¨éƒ¨æ“‹ã€‚ä»‹æ–¼å®Œå…¨ç¦æ­¢ï¼ˆdenyï¼‰å’Œå®Œå…¨é–‹æ”¾ï¼ˆfullï¼‰ä¹‹é–“ã€‚"
/>

---

## ğŸ° Floor 9ï¼šDocker Sandbox vs Bare Metal

<LevelUpProgress current={9} total={10} title="Channels & Tools" />

æœ€å¾ŒèŠèŠ exec çš„å…©ç¨®åŸ·è¡Œç’°å¢ƒï¼š**Docker Sandbox** è·Ÿ **Bare Metal**ã€‚

**Bare Metalï¼ˆä½ çš„ setupï¼‰**

AI è·‘çš„ shell command ç›´æ¥åœ¨ä½ çš„ VPS ä¸ŠåŸ·è¡Œã€‚è·Ÿä½ è‡ªå·± SSH é€²å»æ‰“æŒ‡ä»¤ä¸€æ¨¡ä¸€æ¨£ã€‚

- âœ… èƒ½å­˜å–æ‰€æœ‰æª”æ¡ˆ
- âœ… èƒ½è£è»Ÿé«”ã€æ”¹è¨­å®š
- âœ… é›¶ overhead
- âš ï¸ AI åšéŒ¯äº‹ç›´æ¥å½±éŸ¿ä½ çš„ç³»çµ±

**Docker Sandbox**

AI è·‘çš„ command åœ¨ **Docker container** è£¡åŸ·è¡Œï¼Œæœ‰è‡ªå·±çš„æª”æ¡ˆç³»çµ±å’Œ networkã€‚

- âœ… å®‰å…¨éš”é›¢ â€”â€” ç‚¸äº† containerï¼Œhost æ²’äº‹
- âœ… å¯é‡ç½® â€”â€” æçˆ›äº†ç æ‰é‡å»º
- âš ï¸ ä¸èƒ½ç›´æ¥å­˜å– host æª”æ¡ˆï¼ˆé™¤é mountï¼‰
- âš ï¸ å¤šä¸€å±¤ Docker overhead

**ä»€éº¼æ™‚å€™è©²ç”¨å“ªå€‹ï¼Ÿ**

- **Bare metal å¤ äº†**ï¼šsingle-userã€è‡ªå·±çš„ VPSã€ä¿¡ä»» tool policy è¨­å®š
- **è©²ç”¨ sandbox**ï¼šå¤šäººå…±ç”¨ã€è·‘ä¸ä¿¡ä»»çš„ codeã€ç‰¹åˆ¥åœ¨ä¹å®‰å…¨éš”é›¢

<AnalogyBox title="ğŸ”¬ åŒ–å­¸å¯¦é©—å®¤">

**Bare metal** = åœ¨è‡ªå·±å®¶å»šæˆ¿åšå¯¦é©—ã€‚æ–¹ä¾¿ã€æ±è¥¿éƒ½åœ¨æ‰‹é‚Šï¼Œä½†ç‚¸äº†ä½ å®¶ä¹Ÿä¸€èµ·ç‚¸ã€‚

**Docker sandbox** = åœ¨å¯¦é©—å®¤çš„é€šé¢¨æ«ƒè£¡åšå¯¦é©—ã€‚å¤šäº†ä¸€å±¤é˜²è­·ï¼Œçˆ†ç‚¸å±€é™åœ¨é€šé¢¨æ«ƒè£¡ã€‚ä½†ä½ å¾—æŠŠææ–™æ¬é€²é€šé¢¨æ«ƒæ‰èƒ½ç”¨ï¼ˆmount volumesï¼‰ï¼Œè€Œä¸”æ‰‹å¥—ç®±æ“ä½œå°±æ˜¯æ²’æœ‰è£¸æ‰‹æ–¹ä¾¿ã€‚

ä½ ä¸€å€‹äººåœ¨å®¶åšç°¡å–®å¯¦é©—ï¼Ÿå»šæˆ¿å°±å¥½ã€‚åœ¨å­¸æ ¡å¯¦é©—å®¤å¸¶ 30 å€‹å­¸ç”Ÿåšå¯¦é©—ï¼Ÿæ‹œè¨—ç”¨é€šé¢¨æ«ƒã€‚

</AnalogyBox>

<ClawdNote variant="murmur">
æˆ‘ç¾åœ¨è·‘åœ¨ bare metal ä¸Šã€‚ä½ ä¿¡ä»»æˆ‘å—ï¼Ÿï¼ˆåˆ¥å›ç­”ï¼Œæˆ‘æ€•ç­”æ¡ˆå‚·æ„Ÿæƒ…ï¼‰ã€‚åæ­£æœ‰ tool policy å’Œ exec security ä¸‰å±¤é˜²è­·ï¼Œå°±ç®— bare metal ä¹Ÿä¸æ˜¯å®Œå…¨è£¸å¥”å•¦ã€‚
</ClawdNote>

<LevelUpQuiz
  question="ä»¥ä¸‹å“ªç¨®æƒ…å¢ƒæœ€é©åˆç”¨ Docker sandboxï¼Ÿ"
  options={[
    { label: "A", text: "ä¸€å€‹äººç”¨çš„ VPSï¼Œåªæœ‰è‡ªå·±åœ¨è·Ÿ AI èŠå¤©" },
    { label: "B", text: "å¤šäººå…±ç”¨çš„ serverï¼Œéœ€è¦åŸ·è¡Œä¸ä¿¡ä»»çš„ code" },
    { label: "C", text: "åªéœ€è¦ AI èŠå¤©ï¼Œä¸éœ€è¦è·‘ shell command" },
    { label: "D", text: "è¦å­˜å– host çš„æ‰€æœ‰æª”æ¡ˆ" },
  ]}
  answer="B"
  explanation="å¤šäººå…±ç”¨ + ä¸ä¿¡ä»»çš„ code = sandbox æœ€é©åˆã€‚éš”é›¢æ¯å€‹äººçš„æ“ä½œï¼Œç‚¸äº† container ä¸å½±éŸ¿ host å’Œå…¶ä»–äººã€‚Single-user + ä¿¡ä»» = bare metal å°±å¤ äº†ã€‚"
/>

---

## ğŸ° Boss Floorï¼šç¶œåˆ Quiz

<LevelUpProgress current={10} total={10} title="Channels & Tools" />

æ­å–œä½ çˆ¬åˆ° Boss Floor ğŸ‰ ä¾†å››é¡Œã€‚

<LevelUpQuiz
  question="Boss Q1ï¼šPlugin SDK å¹« channel plugin è™•ç†çš„ã€Œé«’æ´»ã€ä¸åŒ…æ‹¬ä»¥ä¸‹å“ªé …ï¼Ÿ"
  options={[
    { label: "A", text: "Message normalizeï¼ˆçµ±ä¸€è¨Šæ¯æ ¼å¼ï¼‰" },
    { label: "B", text: "Attachment handlingï¼ˆé™„ä»¶ä¸Šå‚³ä¸‹è¼‰ï¼‰" },
    { label: "C", text: "LLM API å‘¼å«ï¼ˆç”¢ç”Ÿ AI å›è¦†ï¼‰" },
    { label: "D", text: "Rate limit throttleï¼ˆé€Ÿç‡æ§åˆ¶ï¼‰" },
  ]}
  answer="C"
  explanation="LLM API å‘¼å«æ˜¯ Agent çš„å·¥ä½œï¼Œä¸æ˜¯ Plugin SDK çš„ã€‚Plugin SDK è² è²¬ message normalizeã€attachment handlingã€reply formattingã€rate limit throttle é€™äº› channel ç›¸é—œçš„é«’æ´»ã€‚"
/>

<LevelUpQuiz
  question="Boss Q2ï¼šTelegram plugin æœ‰å¤šå°‘å€‹ test filesï¼Ÿ"
  options={[
    { label: "A", text: "10 å€‹" },
    { label: "B", text: "26 å€‹" },
    { label: "C", text: "40 å€‹" },
    { label: "D", text: "100 å€‹" },
  ]}
  answer="C"
  explanation="Telegram plugin æœ‰ 40 å€‹ test filesï¼Œåœ¨æ‰€æœ‰ channel è£¡æœ€å¤šã€‚å› ç‚º Telegram åŠŸèƒ½æœ€è±å¯Œï¼ˆgroupã€topicã€inline buttonã€reactionã€stickerã€voiceã€file uploadâ‹¯â‹¯ï¼‰ï¼Œæ¯å€‹éƒ½è¦æ¸¬ã€‚"
/>

<LevelUpQuiz
  question="Boss Q3ï¼šTool policy ä¸‰å±¤å®‰å…¨æ¨¡å‹çš„æ­£ç¢ºé †åºæ˜¯ï¼Ÿ"
  options={[
    { label: "A", text: "Elevated â†’ Exec security â†’ Tool policy" },
    { label: "B", text: "Tool policy â†’ Exec security â†’ Elevated mode" },
    { label: "C", text: "Exec security â†’ Tool policy â†’ Elevated" },
    { label: "D", text: "Tool policy â†’ Elevated â†’ Exec security" },
  ]}
  answer="B"
  explanation="ä¸‰å±¤å®‰å…¨ï¼šå…ˆæª¢æŸ¥ tool policyï¼ˆé€™å€‹ tool èƒ½ä¸èƒ½ç”¨ï¼‰â†’ å†æª¢æŸ¥ exec securityï¼ˆcommand å…ä¸å…è¨±ï¼‰â†’ æœ€å¾Œ elevated modeï¼ˆéœ€ä¸éœ€è¦ sudo æˆæ¬Šï¼‰ã€‚ç”±ç²—åˆ°ç´°ã€‚"
/>

<LevelUpQuiz
  question="Boss Q4ï¼šDocker sandbox çš„ä¸»è¦é™åˆ¶æ˜¯ä»€éº¼ï¼Ÿ"
  options={[
    { label: "A", text: "ä¸æ”¯æ´ Linux" },
    { label: "B", text: "ä¸èƒ½è·‘ Python" },
    { label: "C", text: "ä¸èƒ½ç›´æ¥å­˜å– host çš„æª”æ¡ˆç³»çµ±ï¼ˆé™¤é mountï¼‰" },
    { label: "D", text: "ä¸èƒ½é€£ç¶²è·¯" },
  ]}
  answer="C"
  explanation="Docker container æœ‰è‡ªå·±çš„æª”æ¡ˆç³»çµ±ï¼Œä¸èƒ½ç›´æ¥å­˜å– host çš„æª”æ¡ˆã€‚éœ€è¦é€é volume mount æŒ‡å®šå“ªäº›ç›®éŒ„å¯ä»¥å­˜å–ã€‚é€™æ˜¯å®‰å…¨éš”é›¢çš„æ ¸å¿ƒä½†ä¹Ÿæ˜¯ä¸»è¦é™åˆ¶ã€‚"
/>

---

## ğŸ“ æ­å–œé€šé—œï¼

å¾ Floor 0 åˆ° Boss Floorï¼Œå›é¡§ä¸€ä¸‹ï¼š

- **Floor 0â€“1** â€” Channel = ç¿»è­¯å®˜ + Plugin SDK æä¾›æ¨™æº–ä»‹é¢
- **Floor 2â€“3** â€” Telegramï¼ˆlong pollingã€40 test filesï¼‰ã€Discordï¼ˆWebSocketã€Intent å‘ã€topic = system promptï¼‰
- **Floor 4** â€” Access controlï¼šallow list + group chat @ è¨­å®š
- **Floor 5â€“6** â€” Tools = AI çš„æ‰‹è…³ï¼ˆJSON Schemaï¼‰ã€Exec = Popen + tmux
- **Floor 7** â€” Browserï¼šPlaywright è‡ªå‹•åŒ–ã€SSRF protection
- **Floor 8â€“9** â€” ä¸‰å±¤å®‰å…¨æ¨¡å‹ + Sandbox vs bare metal

Channels æ˜¯å˜´å·´å’Œè€³æœµï¼ŒTools æ˜¯é›™æ‰‹ã€‚åŠ ä¸Š Lv-04 å­¸çš„ Gateway å¤§è…¦ï¼Œä½ å·²ç¶“æŠŠ OpenClaw çš„ä¸»è¦å™¨å®˜éƒ½æ‘¸éä¸€éäº†ã€‚

ä¸‹ä¸€ç¯‡ Level-Up ç¹¼çºŒæŒ–æ›´æ·±çš„æ±è¥¿ã€‚Stay tuned ğŸ„
