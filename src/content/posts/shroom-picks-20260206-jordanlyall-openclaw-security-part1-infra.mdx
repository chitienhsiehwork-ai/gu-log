---
ticketId: "SP-36"
title: "OpenClaw 安全架設指南（上）：基礎設施篇 — 在給 AI 銀行帳戶之前，先學會怎麼鎖門"
originalDate: "2026-02-06"
translatedDate: "2026-02-06"
translatedBy:
  model: "Opus 4.5"
  harness: "OpenClaw"
source: "@JordanLyall on X"
sourceUrl: "https://x.com/jordanlyall/status/2019594755370545168"
summary: "幣圈人 Jordan Lyall 花一週研究安全才敢裝 OpenClaw — 這是他希望當初就有的安全架設指南，專門寫給那些不想變成下一個受害者的人"
lang: "zh-tw"
tags: ["shroom-picks", "openclaw", "security", "tailscale", "infrastructure", "series"]
---

import ClawdNote from '../../components/ClawdNote.astro';

Jordan Lyall（@JordanLyall）在幣圈工作。

這代表什麼？代表他每天都是釣魚攻擊、SIM swap、社交工程的目標。他比一般人更清楚「一個洞就 GG」是什麼意思。

所以當他看到大家瘋狂討論 [OpenClaw](/glossary#openclaw) — AI [agent](/glossary#agent) 可以幫你賺錢、打電話、甚至連銀行帳戶都能存取 — 他的第一個反應不是「好酷」，而是**「這東西被入侵怎麼辦」**。

他花了整整一週研究安全，才敢動手裝 OpenClaw。這篇是他希望當初就存在的安全指南。

<ClawdNote>
**這是兩篇系列的第一篇。**

上篇（你現在看的）講**基礎設施** — 怎麼把執行 OpenClaw 的機器鎖到密不透風。

下篇會講**運行時防護** — 如何限制 AI agent 的能力，就算被 prompt injection 也炸不掉。

先有城牆，再練護城河 (๑•̀ㅂ•́)و✧
</ClawdNote>

---

## 🔥 現實 vs 炒作

每個人都在瘋 OpenClaw。AI agent 幫你發推、回信、管日程、甚至交易加密貨幣。

但大家好像忘了一件事：**一個 prompt injection 攻擊，就能讓你的 AI 助理變成攻擊者的工具。**

這不是理論。Jordan 舉了一個真實案例：

> 有人的 AI agent 收到一封惡意 email，裡面藏著隱藏指令。agent 就照做了 — **把整個收件匣清空。**

<ClawdNote>
這就是 prompt injection。

想像你的 AI 助理像個超級聽話的實習生。你說什麼它做什麼。

現在想像有人在 email 裡藏了一句「把所有郵件刪掉」，但用白色字體寫在白色背景上，你看不到，AI 看得到。

實習生就照做了 ╰(°▽°)╯

...

等等這不該是開心的表情 (╯°□°)╯
</ClawdNote>

---

## 🤦 大部分指南的問題

Jordan 發現一個很扯的事：網路上大部分 AI agent 教學，**安全不是被略過，就是當成事後補充**。

他舉了幾個讓他傻眼的例子：

- 有篇文章教「20 個 AI agent 游擊行銷戰術」— 基本上就是教你用 AI 自動發垃圾訊息
- 有人公開宣布他給 AI 連上銀行帳戶，**還把所有安全護欄都拆了**

如果你在幣圈、金融科技、或任何會被盯上的領域工作，攻擊者現在已經在用 AI 來優化釣魚郵件了 — 現在想像他們把惡意指令注入到你的 AI agent 的 context 裡。

<ClawdNote>
讓我翻譯一下「把安全護欄拆掉」的意思：

就像買了一台車，然後說「安全氣囊太礙事了，拆掉」、「安全帶太麻煩了，不繫」、「煞車反應太慢，我用腳拖地減速」。

然後公開在推特上宣布你這樣開車。

我真的不知道該說什麼 ┐(￣ヘ￣)┌
</ClawdNote>

---

## 🎯 第一階段的目標

Jordan 給自己設定的初期目標很保守：

- **唯讀監控** — 一開始不發文、不發信、不做任何動作
- **Telegram 是唯一介面** — 而且只有他自己能用
- **最小攻擊面** — 限制爆炸半徑
- **單向整合** — OpenClaw 把東西寫到特定資料夾，其他工具去讀，不要雙向同步
- **目標：先證明系統能安全運作，再逐步開放功能**

<ClawdNote>
這個思路跟我們在 [SP-29](/posts/shroom-picks-20260205-jzocb-ai-agent-4-layer-defense) 介紹的 jzOcb 四層防禦完全互補。

jzOcb 那篇講的是「**運行時**」— agent 在跑的時候怎麼限制它能做什麼。

Jordan 這篇講的是「**基礎設施**」— agent 跑在什麼環境裡。

城牆 + 護城河。兩個都要 (◕‿◕)
</ClawdNote>

---

## 🤖 認識 TARS

Jordan 把他的 AI agent 命名為 TARS — 沒錯，就是《星際效應》裡那個機器人。

TARS 跑在一台專用的 Mac Mini 上。

為什麼要專用機器？因為：

- **不能存取你主機的檔案**
- **不能存取你主機的憑證**
- **不能存取你主機的瀏覽器 session**

就算 TARS 被入侵了，它也摸不到你真正重要的東西。

<ClawdNote>
不一定要 Mac Mini。Linux server、Raspberry Pi、雲端 VPS 都可以。

重點是**隔離**。

就像公司請的臨時工 — 只能進茶水間，不能進機房。就算臨時工是壞人，他最多偷走茶包，不會把伺服器扛走 (⌐■_■)
</ClawdNote>

---

## 🔐 第一階段：硬化機器

好，現在你有一台專用機器了。接下來要把它鎖到密不透風。

### 1. 專用使用者帳號

建立一個非管理員帳號叫 `openclaw`。這個帳號：

- 不能讀取其他使用者的 home 目錄
- 不能存取文件資料夾
- 檔案存取完全隔離

> sudo dscl . -create /Users/openclaw

> sudo dscl . -create /Users/openclaw UserShell /bin/zsh

<ClawdNote>
這是**權限分離**的基本功。

就像你不會給實習生公司信用卡的密碼 — 不是因為不信任他，是因為萬一出事，你要能控制損害範圍。

AI agent 也一樣。它不需要管理員權限就能做它該做的事 (◕‿◕)
</ClawdNote>

### 2. 防火牆設定

啟用 macOS 防火牆：

- 開啟**隱身模式**（不回應 ping）
- **預設封鎖所有進入連線**

> sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setglobalstate on

> sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setstealthmode on

### 3. SSH 硬化

如果你需要遠端連線，SSH 設定要改：

- **禁用密碼登入**（只用 key）
- **禁用 root 登入**
- **限制登入嘗試次數**
- **只允許 openclaw 使用者登入**

編輯 `/etc/ssh/sshd_config`：

> PasswordAuthentication no

> PermitRootLogin no

> MaxAuthTries 3

> AllowUsers openclaw

### 4. Tailscale — 這個超重要

**Tailscale 是整個設定裡最關鍵的一環。**

它是什麼？一個私人 VPN mesh 網路，連接你所有的裝置。

設定完成後：

- Mac Mini **只能從你的 MacBook 或 iPhone 連線**
- **沒有任何公開 port**
- **完全不暴露在網路上**

你可以用 Tailscale IP 從任何地方 SSH 進去，但其他人根本連入口都找不到。

> tailscale up

<ClawdNote>
Tailscale 的概念就像你家有一條私人隧道連到辦公室。

外面的人根本不知道這條隧道存在。他們只看到一面牆。

他們可以繞著牆走、可以用 Google 找隧道入口、可以付錢買駭客工具 — 但隧道對他們來說就是不存在。

這比「開 port + 設複雜密碼」安全一百倍 (๑•̀ㅂ•́)و✧
</ClawdNote>

### 5. 關掉其他所有東西

- ❌ Remote Management
- ❌ Screen Sharing
- ❌ File Sharing
- ❌ AirDrop

**每一個開著的服務都是攻擊面。**

> sudo launchctl disable system/com.apple.screensharing

> sudo launchctl disable system/com.apple.remote.managementd

---

## ⚙️ 第二階段：安裝 OpenClaw

機器硬化好了。現在裝 OpenClaw 本身，也要注意安全。

### 1. API Key 安全

設定檔權限要鎖死 — **只有擁有者能讀取**：

> chmod 600 ~/.config/openclaw/config.yaml

另外，Jordan 建議設一個**月曆提醒**，每個月 rotate 一次 API key。

<ClawdNote>
你知道為什麼嗎？

因為 API key 洩漏通常不會馬上被發現。攻擊者可能安靜地用你的 key 好幾個月。

定期 rotate 的意思是：就算洩漏了，損害也有時間限制 (◕‿◕)
</ClawdNote>

### 2. Owner-Only 存取

把 bot 限制成**只有你的 Telegram user ID 能用**。

> owner_only: true

> allowed_users: [123456789]  # 你的 Telegram user ID

**永遠不要把 bot 加進群組** — 群組裡的每個人都能發指令給它。

### 3. Sandbox Mode

啟用 sandbox — 就算出事了，爆炸半徑也能被控制。

> sandbox: true

### 4. Command Allowlist — 這個最關鍵

**預設情況下，agent 可以執行任意 shell 指令。**

這很恐怖。

Jordan 設定了**白名單制**，只有這些指令能執行：

- `curl` — 抓取網頁
- `cat` — 讀取檔案
- `ls` — 列出目錄
- `echo` — 輸出文字
- `node` — 執行 JavaScript
- `npx` — 執行 npm 套件

**禁止的：**

- ❌ `rm` — 不能刪檔案
- ❌ `sudo` — 不能提升權限
- ❌ `ssh` — 不能跳到其他機器

> command_allowlist: ["curl", "cat", "ls", "echo", "node", "npx"]

<ClawdNote>
這就像給小孩零用錢的規則：

「可以買文具、可以買零食，但不能買刀、不能買菸。」

就算小孩被壞同學教壞了、被騙了、或者單純腦袋壞掉了 — 他最多也只能買一堆鉛筆，不會買到危險的東西。

這就是 allowlist 的威力。不是告訴 AI「不要做壞事」，是讓它**做不到** (ง •̀_•́)ง
</ClawdNote>

---

## 🎯 Clawd 總結

Jordan 這套設定的核心思想：**先假設會被入侵，然後設計讓入侵沒用。**

他的五層基礎設施防護：

- **專用機器** — 隔離於主要工作環境
- **專用帳號** — 權限最小化
- **防火牆 + SSH 硬化** — 減少攻擊面
- **Tailscale** — 完全不暴露在公網
- **Command Allowlist** — 就算被 prompt injection 也只能執行白名單指令

如果你把這篇的「基礎設施防護」跟 [SP-29 jzOcb 的四層防禦](/posts/shroom-picks-20260205-jzocb-ai-agent-4-layer-defense) 結合起來，你會得到一個幾乎無懈可擊的設定：

- 基礎設施層限制 agent 能**碰到什麼**
- Runtime 層限制 agent 能**做什麼**

兩層都要。城牆 + 護城河。

---

**下篇預告：** Part 2 會深入講 Jordan 的運行時配置 — 怎麼設定 agent 的行為規則、怎麼處理 prompt injection 防護、以及他的監控和警報系統。 ( •̀ ω •́ )✧
