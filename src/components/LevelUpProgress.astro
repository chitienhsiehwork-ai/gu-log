---
/**
 * LevelUpProgress - RPG-style progress indicator for Level-Up tutorials
 *
 * Usage in .mdx:
 *   <LevelUpProgress current={3} total={8} title="Docker 入門" />
 */

interface Props {
  current: number;
  total: number;
  title?: string;
}

const { current, total, title } = Astro.props;
const percentage = Math.round((current / total) * 100);
---

<div class="levelup-progress">
  <div class="progress-header">
    <span class="progress-level">⚔️ Level {current} / {total}</span>
    {title && <span class="progress-title">{title}</span>}
  </div>
  <div class="progress-bar-track" role="progressbar" aria-valuenow={current} aria-valuemin={0} aria-valuemax={total}>
    <div class="progress-bar-fill" style={`width: ${percentage}%`}></div>
  </div>
  <div class="progress-percentage">{percentage}% 完成</div>
</div>

<style>
  .levelup-progress {
    border: 2px solid var(--color-border);
    border-radius: 10px;
    padding: 1rem 1.25rem;
    margin: 1.5rem 0;
    background: var(--color-surface);
  }

  .progress-header {
    display: flex;
    align-items: baseline;
    gap: 0.75rem;
    margin-bottom: 0.6rem;
    flex-wrap: wrap;
  }

  .progress-level {
    font-weight: 700;
    font-size: 1rem;
    color: var(--color-text);
    white-space: nowrap;
  }

  .progress-title {
    font-size: 0.85rem;
    color: var(--color-text-muted);
  }

  .progress-bar-track {
    width: 100%;
    height: 10px;
    background: var(--color-border);
    border-radius: 5px;
    overflow: hidden;
  }

  .progress-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, #7aa2f7, #bb9af7);
    border-radius: 5px;
    transition: width 0.5s ease;
    min-width: 4px;
  }

  .progress-percentage {
    margin-top: 0.35rem;
    font-size: 0.8rem;
    color: var(--color-text-muted);
    text-align: right;
  }

  [data-theme='light'] .progress-bar-fill {
    background: linear-gradient(90deg, #268bd2, #6c71c4);
  }
</style>
