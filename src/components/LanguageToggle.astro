---
interface Props {
  currentLang: 'zh-tw' | 'en';
  currentPath: string;
}

const { currentLang, currentPath } = Astro.props;

// Calculate the alternate language path
const getAlternatePath = () => {
  if (currentLang === 'zh-tw') {
    // zh-tw -> en: add /en prefix
    return `/en${currentPath}`;
  } else {
    // en -> zh-tw: remove /en prefix
    return currentPath.replace(/^\/en/, '') || '/';
  }
};

const alternatePath = getAlternatePath();
const alternateLabel = currentLang === 'zh-tw' ? 'En' : '文';
---

<a href={alternatePath} class="lang-toggle" title={currentLang === 'zh-tw' ? 'Switch to English' : '切換至中文'}>
  <svg class="lang-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <circle cx="12" cy="12" r="10"/>
    <path d="M2 12h20"/>
    <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
  </svg>
  <span>{alternateLabel}</span>
</a>

<style>
  .lang-toggle {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    color: var(--color-text-muted);
    text-decoration: none;
    font-size: 0.85rem;
    font-weight: 500;
    transition: all 0.2s ease;
  }

  .lang-toggle:hover {
    color: var(--color-accent);
    background: var(--color-surface);
  }

  .lang-icon {
    width: 16px;
    height: 16px;
  }
</style>
