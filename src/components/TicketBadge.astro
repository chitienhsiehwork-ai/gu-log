---
/**
 * TicketBadge - Display article ticket ID with appropriate styling
 *
 * Types:
 * - SD: ShroomDog Original (accent color)
 * - SP: ShroomDog Picks (muted color)
 * - CP: Clawd Picks (clawd color)
 */
interface Props {
  ticketId: string;
  showTooltip?: boolean;
  showLabel?: boolean;
}

const { ticketId, showTooltip = true, showLabel = false } = Astro.props;

// Extract prefix (SD, SP, CP)
const prefix = ticketId.split('-')[0];

const labels: Record<string, string> = {
  SD: 'ShroomDog Original',
  SP: 'ShroomDog Picks',
  CP: 'Clawd Picks',
};

const label = labels[prefix] || '';
---

<span class="ticket-wrapper">
  <span
    class={`ticket-badge ticket-${prefix.toLowerCase()}`}
    title={showTooltip && !showLabel ? label : undefined}
  >
    {ticketId}
  </span>
  {showLabel && <span class={`ticket-label ticket-label-${prefix.toLowerCase()}`}>{label}</span>}
</span>

<style>
  .ticket-wrapper {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
  }

  .ticket-badge {
    display: inline-block;
    font-size: 0.75rem;
    font-weight: 500;
    padding: 0.15rem 0.5rem;
    border-radius: 4px;
    font-family: 'SF Mono', 'Fira Code', monospace;
    letter-spacing: 0.02em;
    vertical-align: middle;
    cursor: default;
    transition: opacity 0.2s ease;
  }

  .ticket-badge:hover {
    opacity: 0.8;
  }

  .ticket-label {
    font-size: 0.85rem;
    font-weight: 500;
  }

  /* SD: ShroomDog Original - muted green/teal */
  .ticket-sd {
    background-color: rgba(38, 139, 121, 0.15);
    color: #268b79;
  }

  .ticket-label-sd {
    color: #268b79;
  }

  /* SP: ShroomDog Picks - muted blue */
  .ticket-sp {
    background-color: rgba(38, 139, 210, 0.15);
    color: #268bd2;
  }

  .ticket-label-sp {
    color: #268bd2;
  }

  /* CP: Clawd Picks - muted orange (低彩度橘色) */
  .ticket-cp {
    background-color: rgba(203, 117, 81, 0.15);
    color: #cb7551;
  }

  .ticket-label-cp {
    color: #cb7551;
  }
</style>
